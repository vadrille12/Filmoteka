{"mappings":"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","sources":["src/index.js","src/js/filmSearch.js","src/js/fetchGenres.js","src/js/backToTopBtn.js","src/js/switchDayNight.js"],"sourcesContent":["import './js/fetchAPI';\nimport './js/refs';\nimport './js/storage';\nimport './js/modalMovie';\nimport './js/modalStudents';\nimport './js/pagination';\nimport './js/filmSearch';\nimport './js/filmCard';\nimport './js/popUpBtn';\nimport './js/api-vars';\nimport './js/fetchGenres';\nimport './js/localStorage';\nimport './js/backToTopBtn';\nimport './js/switchDayNight';\nimport './js/scrollToTop';\nimport './js/trailer';\n// import './js/watched';\nimport './js/AddToWatched';\n// import './js/library';\nimport './js/loader';\n","import { API_KEY, BASE_URL, TREND_URL, SEARCH_URL } from './api-vars.js';\nimport { showTrendingMovies } from './filmCard';\nimport { renderTrendingMovies } from './filmCard';\nimport { makeTuiPagination } from './pagination.js';\nimport { refs } from './refs';\nimport { load, save, remove } from './localStorage';\nimport scrollToTop from './scrollToTop.js';\n//import {fetchTrendingMovies} from './fetchAPI'\n\nconst logo = document.querySelector('.header-logo__link');\nlogo.addEventListener('click', onClickLogo);\n\nrefs.form.addEventListener('submit', onFormSubmit);\nlet page = 1;\nlet query = '';\n\nexport default async function fetchMovie(query, page) {\n  try {\n    const response = await fetch(\n      `${SEARCH_URL}?api_key=${API_KEY}&page=${page}&include_adult=false&query=${query}`\n    );\n    const data = await response.json();\n    save('search-storage', data);\n    return data;\n  } catch (error) {\n    console.error();\n  }\n}\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  query = event.currentTarget.elements.searchQuery.value.trim();\n  console.log(query);\n  refs.paginationEl.style.display = 'none';\n\n  if (query === '') {\n    invalidSearch('Search for movies is empty! Enter movie name, please', 2000);\n    refs.paginationEl.style.display = 'none';\n    return;\n  }\n  await fetchMovie(query, page)\n    .then(data => {\n      console.log(data);\n      const totalRes = data.total_results;\n      console.log(totalRes);\n      if (!totalRes) {\n        invalidSearch(\n          'Search result not successful. Enter the correct movie name and try again',\n          2000\n        );\n        //refs.paginationEl.style.display = 'none';\n      }\n\n      if (totalRes >= 1) {\n        renderTrendingMovies(data.results);\n        page += 1;\n        makeTuiPagination(totalRes, data.total_pages).on(\n          'afterMove',\n          ({ page }) => {\n            fetchMovie(query, page).then(data => {\n              renderTrendingMovies(data.results);\n              save('search-storage', data);\n              scrollToTop();\n            });\n          }\n        );\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      refs.form.reset();\n    });\n}\n\nexport function invalidSearch(message, showTime) {\n  refs.form.insertAdjacentHTML(\n    'beforeend',\n    '<p class=\"form__uncorrect-search is-hidden\"></p>'\n  );\n  const notification = document.querySelector('.form__uncorrect-search');\n  notification.textContent = `${message}`;\n  setTimeout(() => {\n    notification.classList.toggle('is-hidden');\n  }, showTime);\n\n  showTrendingMovies(page);\n\n  const removeNotification = setTimeout(() => {\n    refs.form.lastElementChild.remove();\n  }, 2000);\n}\n\nfunction onClickLogo() {\n  page = 1;\n  showTrendingMovies(page);\n}\n\n///****************************************** */\n//***ORIGINAL */\n// async function onFormSubmit(event) {\n//     try {\n//         event.preventDefault();\n//         page = 1;\n//         query = event.currentTarget.elements.searchQuery.value.trim();\n//         //console.log(query)\n//         if (!query) {\n//             moviesGallery.innerHTML = \"\";\n//             return\n//         }\n\n//     const data = await fetchMovie(query, page);\n//     console.log(data);\n//         renderTrendingMovies(data.results);\n//         if (data.total_results === 0) {\n//         //console.log(data.total_results)\n//             invalidSearch();\n//             showTrendingMovies();\n//            return;\n//         }\n//     } catch(error) {\n//         console.error()\n// }\n// }\n\n// const invalidSearch = function () {\n//   const notification = `<p class=\"uncorrect-search\">\n//     Search result was NOT successful. Enter the correct movie name and try again!\n//   </p>;`;\n//  refs.form.insertAdjacentHTML('beforeend', notification);\n//   const removeNotification = setTimeout(() => {\n//     refs.form.lastElementChild.remove();\n//     //console.log(refs.form.lastElementChild)\n//   }, 2000);\n//   removeNotification();\n// };\n","import { API_KEY, BASE_URL } from './/api-vars.js';\n\nexport async function getGenres() {\n  try {\n    const response = await fetch(\n      `${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=en-US`\n    );\n    const respGenres = await response.json();\n\n    return respGenres;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nexport function genresToLocalStorage(arr) {\n  arr.map(genre => {\n    localStorage.setItem(JSON.stringify(genre.id), genre.name);\n  });\n}\n\ngetGenres().then(res => {\n  genresToLocalStorage(res.genres);\n});\n","export const btnToTop = document.querySelector('#btn--to_top');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  window.addEventListener('scroll', function () {\n    if (this.scrollY > 100) {\n      btnToTop.classList.add('show');\n    } else {\n      btnToTop.classList.remove('show');\n    }\n  });\n});\n","import { refs } from './refs';\n\n\nwindow.addEventListener('load', windowLoad);\n\nexport function windowLoad() {\n  const toggler = document.querySelector('.toggler');\n  const themeBtn = document.querySelector('.theme-btn');\n  const htmlBlock = document.documentElement;\n  const saveUserTheme = localStorage.getItem('user-theme');\n \n  let userTheme;\n  if (window.matchMedia) {\n    userTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\n      ? 'dark'\n      : 'light';\n  }\n  window\n    .matchMedia('(prefers-color-scheme: dark)')\n    .addEventListener('change', e => {\n      !saveUserTheme ? changeTheme() : null;\n    });\n\n  if (themeBtn) {\n    themeBtn.addEventListener('click', function (e) {\n      changeTheme(true);\n    });\n  }\n\n  function setThemeClass() {\n    if (saveUserTheme) {\n      htmlBlock.classList.add(saveUserTheme);\n    } else {\n      htmlBlock.classList.add(userTheme);\n    }\n  }\n  setThemeClass();\n\n  function changeTheme(saveTheme = false) {\n    let currentTheme = htmlBlock.classList.contains('light') ? 'light' : 'dark';\n    let newTheme;\n    if (currentTheme === 'light') {\n      newTheme = 'dark';\n    } else if (currentTheme === 'dark') {\n      newTheme = 'light';\n    }\n    htmlBlock.classList.remove(currentTheme);\n    htmlBlock.classList.add(newTheme);\n    saveTheme ? localStorage.setItem('user-theme', newTheme) : null;\n  }\n}\n"],"names":["parcelRequire","$bpxeT","document","querySelector","addEventListener","$927468236d9ebec1$var$page","$31Aea","showTrendingMovies","$4Nugj","refs","form","event","$927468236d9ebec1$var$_onFormSubmit","apply","this","arguments","$927468236d9ebec1$var$query","query1","page1","$927468236d9ebec1$var$_fetchMovie","$parcel$interopDefault","$2TvXO","mark","_callee","response","data","fetch","concat","$ajzNc","SEARCH_URL","API_KEY","_ctx","sent","json","$UL92Z","save","console","error","preventDefault","currentTarget","elements","searchQuery","value","trim","log","paginationEl","style","display","$927468236d9ebec1$export$3e457af76575b558","$927468236d9ebec1$export$2e2bcd8739ae039","then","data1","totalRes","total_results","renderTrendingMovies","results","$jcFG7","makeTuiPagination","total_pages","on","param","page2","page","$bKWtT","default","catch","finally","reset","message","showTime","insertAdjacentHTML","notification","textContent","setTimeout","classList","toggle","lastElementChild","remove","$26f18cb28b6ef3bc$var$_getGenres","respGenres","BASE_URL","t0","$26f18cb28b6ef3bc$export$c5604fa8028da00","res","genres","map","genre","localStorage","setItem","JSON","stringify","id","name","$00c094bf35d5b22a$export$f1553a5662cd6555","window","scrollY","add","userTheme","themeBtn","htmlBlock","documentElement","saveUserTheme","getItem","matchMedia","matches","e","changeTheme","newTheme","saveTheme","length","currentTheme","contains"],"version":3,"file":"index.d3f377d6.js.map"}