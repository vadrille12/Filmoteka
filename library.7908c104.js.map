{"mappings":"oeAAAA,EAAA,a,aAAA,MAAMC,EAAaC,SAASC,cAAc,qBACpCC,EAAWF,SAASC,cAAc,mBAExCF,EAAWI,iBAAiB,SAG5B,WACIJ,EAAWK,UAAUC,IAAI,aACzBH,EAASE,UAAUE,OAAO,Y,IAJ9BJ,EAASC,iBAAiB,SAM1B,WACID,EAASE,UAAUC,IAAI,aACvBN,EAAWK,UAAUE,OAAO,Y,IA8ChC,MAAMC,EAAeP,SAASC,cAAc,kBACtCO,EAAUR,SAASC,cAAc,qBAIjCQ,EAAkBC,KAAKC,MAC3BC,aAAaC,QAHmB,mBAK5BC,EAAgBJ,KAAKC,MAAMC,aAAaC,QAJd,iBAK1BE,EAAcN,EAAgBO,OAAOF,GACrCG,EAAoBF,EAAYG,QACpC,CAACC,EAAMC,EAAOC,IAAUA,EAAMC,QAAQH,KAAUC,IAMlDrB,EAAWI,iBAAiB,SA6E5B,WACE,GAAIY,EAAa,CACb,MAAMQ,EAAkBb,KAAKC,MAAMC,aAAaC,QA7FpB,mBA8F5BL,EAAQgB,UAAY,GAEpB,KACE,EAAAC,EAAAC,sBAAqBH,E,CACvB,MAAOI,GACPC,QAAQC,IAAIF,EAAMG,Q,MApFxB5B,EAASC,iBAAiB,SAyF1B,WACE,GAAIY,EAAa,CACb,MAAMgB,EAAgBrB,KAAKC,MAAMC,aAAaC,QAzGpB,iBA0GxBL,EAAQgB,UAAY,GACxB,KACE,EAAAC,EAAAC,sBAAqBK,E,CAErB,MAAOJ,GACPC,QAAQC,IAAIF,EAAMG,Q,MA/FnBb,EAAkBe,QACrBzB,EAAaH,UAAUE,OAAO","sources":["src/js/watched.js"],"sourcesContent":["const watchedBtn = document.querySelector('.watched-list-btn');\nconst queueBtn = document.querySelector('.queue-list-btn');\n\nwatchedBtn.addEventListener('click', onWatched);\nqueueBtn.addEventListener('click', onQueueBtn);\n\nfunction onWatched() {\n    watchedBtn.classList.add('js-active');\n    queueBtn.classList.remove('js-active');\n}\nfunction onQueueBtn() {\n    queueBtn.classList.add('js-active');\n    watchedBtn.classList.remove('js-active');\n}\n\n// // создание \n\nimport { API_KEY, BASE_URL, TREND_URL, SEARCH_URL } from './api-vars.js';\n\nfunction createLibraryMarkup({\n  genres,\n  poster_path,\n  title,\n  release_date,\n  id,\n  vote_average\n}) {\n  let genresArr = [];\n  genres.map((genre) =>\n    genresArr.push(genre.name));\n  if (genresArr.length > 3) {\n    const changedArr = genresArr.slice(0, 2);\n    changedArr.push('Other');\n    genresArr = changedArr;\n  }\n  const genresStr = genresArr.join(', ');\n  const year = release_date.slice(0, 4);\n  const rating = vote_average.toFixed(1);\n  return `<li class=\"grid__item film-card \">\n        <a href=\"#\" data-id=\"${id}\" class=\"list\">\n          <div class=\"film-card__thumb\">\n            <img\n              class=\"film-card__img\"\n              src=\"${API_KEY}${poster_path}\"\n              alt=\"Movie poster\"\n              loading=\"lazy\"\n              id=${id}\n            />\n          </div>\n          <h2 class=\"film-card__header\">${title}</h2>\n        </a>\n        <p class=\"film-card__genres\">${genresStr}</p>\n        <span class=\"film-card__year\">${year}</span>\n        <span class=\"film-card__rating\">${rating}</span>\n      </li>`;\n}\n\n// рендер\nconst emptyLibrary = document.querySelector('.empty-library');\nconst listLib = document.querySelector('.film-list-lib-js');\n\nconst LOCAL_STORAGE_KEY_WATCHED = 'watched-movies';\nconst LOCAL_STORAGE_KEY_QUEUE = 'queue-movies';\nconst saveDataWatched = JSON.parse(\n  localStorage.getItem(LOCAL_STORAGE_KEY_WATCHED)\n);\nconst saveDataQueue = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_QUEUE));\nconst saveDataAll = saveDataWatched.concat(saveDataQueue);\nconst savedDataAllQniue = saveDataAll.filter(\n  (data, index, array) => array.indexOf(data) === index\n);\n\n\n// init();\n\nwatchedBtn.addEventListener('click', onWatchedClick);\nqueueBtn.addEventListener('click', onQueueClick);\n\nif (!savedDataAllQniue.length) {\n  emptyLibrary.classList.remove('is-hidden');\n}\n\n// export function init() {\n//   if (saveDataAll) {\n//     try {\n      \n//       savedDataAllQniue.map(id => {\n//         fetch.getFilmDetails(id).then(promise => {\n//           const markup = createLibraryMarkup(promise);\n//           listLib.insertAdjacentHTML('beforeend', markup);\n//         });\n//       });\n//     } catch (error) {\n//       console.log(error.message);\n//     } \n//   }\n// }\n\n\n// export function init() {\n//   if (saveDataAll) {\n//     try {\n      \n//       savedDataAllQniue.map(id => {\n\n//           const markup = createLibraryMarkup(promise);\n//           listLib.insertAdjacentHTML('beforeend', markup);\n//       });\n//     } catch (error) {\n//       console.log(error.message);\n//     } \n//   }\n// }\n\n// function onWatchedClick() {\n//   if (saveDataAll) {\n//       const saveDataWatched = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_WATCHED));\n//       listLib.innerHTML = '';\n//       try {\n      \n//       saveDataWatched.map(id => {\n//         fetch.getFilmDetails(id).then(promise => {\n//           const markup = createLibraryMarkup(promise);\n//           listLib.insertAdjacentHTML('beforeend', markup);\n//         });\n//       });\n//     } catch (error) {\n//       console.log(error.message);\n//     } \n//   }\n// }\n\n// function onQueueClick() {\n//   if (saveDataAll) {\n//       const saveDataQueue = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_QUEUE));\n//         listLib.innerHTML = '';\n//     try {\n     \n//       saveDataQueue.map(id => {\n//         fetch.getFilmDetails(id).then(promise => {\n//           const markup = createLibraryMarkup(promise);\n//           listLib.insertAdjacentHTML('beforeend', markup);\n//         });\n//       });\n//     } catch (error) {\n//       console.log(error.message);\n//     } \n//   }\n// }\n\nimport { renderTrendingMovies } from './filmCard';\n\nfunction onWatchedClick() {\n  if (saveDataAll) {\n      const saveDataWatched = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_WATCHED));\n      listLib.innerHTML = '';\n      \n      try {\n        renderTrendingMovies(saveDataWatched);\n    } catch (error) {\n      console.log(error.message);\n    } \n  }\n}\n\nfunction onQueueClick() {\n  if (saveDataAll) {\n      const saveDataQueue = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_QUEUE));\n        listLib.innerHTML = '';\n    try {\n      renderTrendingMovies(saveDataQueue);\n      \n    } catch (error) {\n      console.log(error.message);\n    } \n  }\n}"],"names":["parcelRequire","$7126a8cfa5cf9b17$var$watchedBtn","document","querySelector","$7126a8cfa5cf9b17$var$queueBtn","addEventListener","classList","add","remove","$7126a8cfa5cf9b17$var$emptyLibrary","$7126a8cfa5cf9b17$var$listLib","$7126a8cfa5cf9b17$var$saveDataWatched","JSON","parse","localStorage","getItem","$7126a8cfa5cf9b17$var$saveDataQueue","$7126a8cfa5cf9b17$var$saveDataAll","concat","$7126a8cfa5cf9b17$var$savedDataAllQniue","filter","data","index","array","indexOf","saveDataWatched1","innerHTML","$TEsX4","renderTrendingMovies","error","console","log","message","saveDataQueue1","length"],"version":3,"file":"library.7908c104.js.map"}