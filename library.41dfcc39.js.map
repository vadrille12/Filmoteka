{"mappings":"AAAA,MCAMA,EAAaC,SAASC,cAAc,qBACpCC,EAAWF,SAASC,cAAc,mBAkBxC,SAASE,GAAoBC,OAC3BA,EAAMC,YACNA,EAAWC,MACXA,EAAKC,aACLA,EAAYC,GACZA,EAAEC,aACFA,IAEA,IAAIC,EAAY,GAGhB,GAFAN,EAAOO,KAAKC,GACVF,EAAUG,KAAKD,EAAME,QACnBJ,EAAUK,OAAS,EAAG,CACxB,MAAMC,EAAaN,EAAUO,MAAM,EAAG,GACtCD,EAAWH,KAAK,SAChBH,EAAYM,C,CAKd,MAAO,oEACsBR,0KAIAH,wFAGZG,gFAGuBF,8DAdtBI,EAAUQ,KAAK,oDACpBX,EAAaU,MAAM,EAAG,sDACpBR,EAAaU,QAAQ,wB,CAlCtCpB,EAAWqB,iBAAiB,SAG5B,WACIrB,EAAWsB,UAAUC,IAAI,aACzBpB,EAASmB,UAAUE,OAAO,Y,IAJ9BrB,EAASkB,iBAAiB,SAM1B,WACIlB,EAASmB,UAAUC,IAAI,aACvBvB,EAAWsB,UAAUE,OAAO,Y,IA8ChC,MAAMC,EAAexB,SAASC,cAAc,kBACtCwB,EAAUzB,SAASC,cAAc,qBAIjCyB,EAAkBC,KAAKC,MAC3BC,aAAaC,QAHmB,mBAK5BC,EAAgBJ,KAAKC,MAAMC,aAAaC,QAJd,iBAK1BE,EAAcN,EAAgBO,OAAOF,GACrCG,EAAoBF,EAAYG,QACpC,CAACC,EAAMC,EAAOC,IAAUA,EAAMC,QAAQH,KAAUC,KAa3C,WACL,GAAIL,EACF,IAEEE,EAAkBvB,KAAIH,IACpBgC,MAAMC,eAAejC,GAAIkC,MAAKC,IAC5B,MAAMC,EAASzC,EAAoBwC,GACnClB,EAAQoB,mBAAmB,YAAaD,EAAO,GAC/C,G,CAEJ,MAAOE,GACPC,QAAQC,IAAIF,EAAMG,Q,EApBxBC,GAEAnD,EAAWqB,iBAAiB,SAuB5B,WACE,GAAIY,EAAa,CACb,MAAMmB,EAAkBxB,KAAKC,MAAMC,aAAaC,QAvCpB,mBAwC5BL,EAAQ2B,UAAY,GACpB,IAEAD,EAAgBxC,KAAIH,IAClBgC,MAAMC,eAAejC,GAAIkC,MAAKC,IAC5B,MAAMC,EAASzC,EAAoBwC,GACnClB,EAAQoB,mBAAmB,YAAaD,EAAO,GAC/C,G,CAEJ,MAAOE,GACPC,QAAQC,IAAIF,EAAMG,Q,MAnCxB/C,EAASkB,iBAAiB,SAwC1B,WACE,GAAIY,EAAa,CACb,MAAMqB,EAAgB1B,KAAKC,MAAMC,aAAaC,QAxDpB,iBAyDxBL,EAAQ2B,UAAY,GACxB,IAEEC,EAAc1C,KAAIH,IAChBgC,MAAMC,eAAejC,GAAIkC,MAAKC,IAC5B,MAAMC,EAASzC,EAAoBwC,GACnClB,EAAQoB,mBAAmB,YAAaD,EAAO,GAC/C,G,CAEJ,MAAOE,GACPC,QAAQC,IAAIF,EAAMG,Q,MAnDnBf,EAAkBnB,QACrBS,EAAaH,UAAUE,OAAO","sources":["src/js/api-vars.js","src/js/watched.js"],"sourcesContent":["const API_KEY = '8b20680c766bc5c37143e5d6b7aa7894';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst TREND_URL = `${BASE_URL}/trending/movie/week`;\nconst SEARCH_URL = `${BASE_URL}/search/movie`;\nconst TRAILER_URL = `${BASE_URL}/movie`;\nexport { API_KEY, BASE_URL, TREND_URL, SEARCH_URL, TRAILER_URL };\n","const watchedBtn = document.querySelector('.watched-list-btn');\nconst queueBtn = document.querySelector('.queue-list-btn');\n\nwatchedBtn.addEventListener('click', onWatched);\nqueueBtn.addEventListener('click', onQueueBtn);\n\nfunction onWatched() {\n    watchedBtn.classList.add('js-active');\n    queueBtn.classList.remove('js-active');\n}\nfunction onQueueBtn() {\n    queueBtn.classList.add('js-active');\n    watchedBtn.classList.remove('js-active');\n}\n\n// // создание \n\nimport { API_KEY, BASE_URL, TREND_URL, SEARCH_URL } from './api-vars.js';\n\nfunction createLibraryMarkup({\n  genres,\n  poster_path,\n  title,\n  release_date,\n  id,\n  vote_average\n}) {\n  let genresArr = [];\n  genres.map((genre) =>\n    genresArr.push(genre.name));\n  if (genresArr.length > 3) {\n    const changedArr = genresArr.slice(0, 2);\n    changedArr.push('Other');\n    genresArr = changedArr;\n  }\n  const genresStr = genresArr.join(', ');\n  const year = release_date.slice(0, 4);\n  const rating = vote_average.toFixed(1);\n  return `<li class=\"grid__item film-card \">\n        <a href=\"#\" data-id=\"${id}\" class=\"list\">\n          <div class=\"film-card__thumb\">\n            <img\n              class=\"film-card__img\"\n              src=\"${API_KEY}${poster_path}\"\n              alt=\"Movie poster\"\n              loading=\"lazy\"\n              id=${id}\n            />\n          </div>\n          <h2 class=\"film-card__header\">${title}</h2>\n        </a>\n        <p class=\"film-card__genres\">${genresStr}</p>\n        <span class=\"film-card__year\">${year}</span>\n        <span class=\"film-card__rating\">${rating}</span>\n      </li>`;\n}\n\n// рендер\nconst emptyLibrary = document.querySelector('.empty-library');\nconst listLib = document.querySelector('.film-list-lib-js');\n\nconst LOCAL_STORAGE_KEY_WATCHED = 'watched-movies';\nconst LOCAL_STORAGE_KEY_QUEUE = 'queue-movies';\nconst saveDataWatched = JSON.parse(\n  localStorage.getItem(LOCAL_STORAGE_KEY_WATCHED)\n);\nconst saveDataQueue = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_QUEUE));\nconst saveDataAll = saveDataWatched.concat(saveDataQueue);\nconst savedDataAllQniue = saveDataAll.filter(\n  (data, index, array) => array.indexOf(data) === index\n);\n\n\ninit();\n\nwatchedBtn.addEventListener('click', onWatchedClick);\nqueueBtn.addEventListener('click', onQueueClick);\n\nif (!savedDataAllQniue.length) {\n  emptyLibrary.classList.remove('is-hidden');\n}\n\nexport function init() {\n  if (saveDataAll) {\n    try {\n      \n      savedDataAllQniue.map(id => {\n        fetch.getFilmDetails(id).then(promise => {\n          const markup = createLibraryMarkup(promise);\n          listLib.insertAdjacentHTML('beforeend', markup);\n        });\n      });\n    } catch (error) {\n      console.log(error.message);\n    } \n  }\n}\n\nfunction onWatchedClick() {\n  if (saveDataAll) {\n      const saveDataWatched = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_WATCHED));\n      listLib.innerHTML = '';\n      try {\n      \n      saveDataWatched.map(id => {\n        fetch.getFilmDetails(id).then(promise => {\n          const markup = createLibraryMarkup(promise);\n          listLib.insertAdjacentHTML('beforeend', markup);\n        });\n      });\n    } catch (error) {\n      console.log(error.message);\n    } \n  }\n}\n\nfunction onQueueClick() {\n  if (saveDataAll) {\n      const saveDataQueue = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_QUEUE));\n        listLib.innerHTML = '';\n    try {\n     \n      saveDataQueue.map(id => {\n        fetch.getFilmDetails(id).then(promise => {\n          const markup = createLibraryMarkup(promise);\n          listLib.insertAdjacentHTML('beforeend', markup);\n        });\n      });\n    } catch (error) {\n      console.log(error.message);\n    } \n  }\n}\n"],"names":["$7126a8cfa5cf9b17$var$watchedBtn","document","querySelector","$7126a8cfa5cf9b17$var$queueBtn","$7126a8cfa5cf9b17$var$createLibraryMarkup","genres","poster_path","title","release_date","id","vote_average","genresArr","map","genre","push","name","length","changedArr","slice","join","toFixed","addEventListener","classList","add","remove","$7126a8cfa5cf9b17$var$emptyLibrary","$7126a8cfa5cf9b17$var$listLib","$7126a8cfa5cf9b17$var$saveDataWatched","JSON","parse","localStorage","getItem","$7126a8cfa5cf9b17$var$saveDataQueue","$7126a8cfa5cf9b17$var$saveDataAll","concat","$7126a8cfa5cf9b17$var$savedDataAllQniue","filter","data","index","array","indexOf","fetch","getFilmDetails","then","promise","markup","insertAdjacentHTML","error","console","log","message","$7126a8cfa5cf9b17$export$2cd8252107eb640b","saveDataWatched1","innerHTML","saveDataQueue1"],"version":3,"file":"library.41dfcc39.js.map"}