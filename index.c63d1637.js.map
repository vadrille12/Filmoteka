{"mappings":"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","sources":["src/index.js","src/js/filmSearch.js","src/js/fetchGenres.js","src/js/backToTopBtn.js","src/js/switchDayNight.js"],"sourcesContent":["import './js/fetchAPI';\nimport './js/refs';\nimport './js/storage';\nimport './js/modalMovie';\nimport './js/modalStudents';\nimport './js/pagination';\nimport './js/filmSearch';\nimport './js/filmCard';\nimport './js/popUpBtn';\nimport './js/api-vars';\nimport './js/fetchGenres';\nimport './js/localStorage';\nimport './js/backToTopBtn';\nimport './js/switchDayNight';\nimport './js/scrollToTop';\nimport './js/trailer';\n// import './js/watched';\nimport './js/AddToWatched';\n// import './js/library';\nimport './js/loader';\n","import { API_KEY, BASE_URL, TREND_URL, SEARCH_URL } from './api-vars.js';\nimport { showTrendingMovies } from './filmCard';\nimport { renderTrendingMovies } from './filmCard';\nimport { makeTuiPagination } from './pagination.js';\nimport { refs } from './refs';\nimport { load, save, remove } from './localStorage';\nimport scrollToTop from './scrollToTop.js';\n//import {fetchTrendingMovies} from './fetchAPI'\n\nconst logo = document.querySelector('.header-logo__link');\nlogo.addEventListener('click', onClickLogo);\n\nrefs.form.addEventListener('submit', onFormSubmit);\nlet page = 1;\nlet query = '';\n\nexport default async function fetchMovie(query, page) {\n  try {\n    const response = await fetch(\n      `${SEARCH_URL}?api_key=${API_KEY}&page=${page}&include_adult=false&query=${query}`\n    );\n    const data = await response.json();\n    save('search-storage', data);\n    return data;\n  } catch (error) {\n    console.error();\n  }\n}\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  query = event.currentTarget.elements.searchQuery.value.trim();\n  console.log(query);\n  refs.paginationEl.style.display = 'none';\n\n  if (query === '') {\n    invalidSearch('Search for movies is empty! Enter movie name, please', 2000);\n    refs.paginationEl.style.display = 'none';\n    return;\n  }\n  await fetchMovie(query, page)\n    .then(data => {\n      console.log(data);\n      const totalRes = data.total_results;\n      console.log(totalRes);\n      if (!totalRes) {\n        invalidSearch(\n          'Search result not successful. Enter the correct movie name and try again',\n          2000\n        );\n        //refs.paginationEl.style.display = 'none';\n      }\n\n      if (totalRes >= 1) {\n        renderTrendingMovies(data.results);\n        page += 1;\n        makeTuiPagination(totalRes, data.total_pages).on(\n          'afterMove',\n          ({ page }) => {\n            fetchMovie(query, page).then(data => {\n              renderTrendingMovies(data.results);\n              save('search-storage', data);\n              scrollToTop();\n            });\n          }\n        );\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      refs.form.reset();\n    });\n}\n\nexport function invalidSearch(message, showTime) {\n  refs.form.insertAdjacentHTML(\n    'beforeend',\n    '<p class=\"form__uncorrect-search is-hidden\"></p>'\n  );\n  const notification = document.querySelector('.form__uncorrect-search');\n  notification.textContent = `${message}`;\n  setTimeout(() => {\n    notification.classList.toggle('is-hidden');\n  }, showTime);\n\n  showTrendingMovies(page);\n\n  const removeNotification = setTimeout(() => {\n    refs.form.lastElementChild.remove();\n  }, 2000);\n}\n\nfunction onClickLogo() {\n  page = 1;\n  showTrendingMovies(page);\n}\n\n///****************************************** */\n//***ORIGINAL */\n// async function onFormSubmit(event) {\n//     try {\n//         event.preventDefault();\n//         page = 1;\n//         query = event.currentTarget.elements.searchQuery.value.trim();\n//         //console.log(query)\n//         if (!query) {\n//             moviesGallery.innerHTML = \"\";\n//             return\n//         }\n\n//     const data = await fetchMovie(query, page);\n//     console.log(data);\n//         renderTrendingMovies(data.results);\n//         if (data.total_results === 0) {\n//         //console.log(data.total_results)\n//             invalidSearch();\n//             showTrendingMovies();\n//            return;\n//         }\n//     } catch(error) {\n//         console.error()\n// }\n// }\n\n// const invalidSearch = function () {\n//   const notification = `<p class=\"uncorrect-search\">\n//     Search result was NOT successful. Enter the correct movie name and try again!\n//   </p>;`;\n//  refs.form.insertAdjacentHTML('beforeend', notification);\n//   const removeNotification = setTimeout(() => {\n//     refs.form.lastElementChild.remove();\n//     //console.log(refs.form.lastElementChild)\n//   }, 2000);\n//   removeNotification();\n// };\n","import { API_KEY, BASE_URL } from './/api-vars.js';\n\nexport async function getGenres() {\n  try {\n    const response = await fetch(\n      `${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=en-US`\n    );\n    const respGenres = await response.json();\n\n    return respGenres;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nexport function genresToLocalStorage(arr) {\n  arr.map(genre => {\n    localStorage.setItem(JSON.stringify(genre.id), genre.name);\n  });\n}\n\ngetGenres().then(res => {\n  genresToLocalStorage(res.genres);\n});\n","export const btnToTop = document.querySelector('#btn--to_top');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  window.addEventListener('scroll', function () {\n    if (this.scrollY > 100) {\n      btnToTop.classList.add('show');\n    } else {\n      btnToTop.classList.remove('show');\n    }\n  });\n});\n","import { refs } from './refs';\n\n\nwindow.addEventListener('load', windowLoad);\n\nexport function windowLoad() {\n  const toggler = document.querySelector('.toggler');\n  const themeBtn = document.querySelector('.theme-btn');\n  const htmlBlock = document.documentElement;\n  const saveUserTheme = localStorage.getItem('user-theme');\n \n  let userTheme;\n  if (window.matchMedia) {\n    userTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\n      ? 'dark'\n      : 'light';\n  }\n  window\n    .matchMedia('(prefers-color-scheme: dark)')\n    .addEventListener('change', e => {\n      !saveUserTheme ? changeTheme() : null;\n    });\n\n  if (themeBtn) {\n    themeBtn.addEventListener('click', function (e) {\n      changeTheme(true);\n    });\n  }\n\n  function setThemeClass() {\n    if (saveUserTheme) {\n      htmlBlock.classList.add(saveUserTheme);\n    } else {\n      htmlBlock.classList.add(userTheme);\n    }\n  }\n  setThemeClass();\n\n  function changeTheme(saveTheme = false) {\n    let currentTheme = htmlBlock.classList.contains('light') ? 'light' : 'dark';\n    let newTheme;\n    if (currentTheme === 'light') {\n      newTheme = 'dark';\n    } else if (currentTheme === 'dark') {\n      newTheme = 'light';\n    }\n    htmlBlock.classList.remove(currentTheme);\n    htmlBlock.classList.add(newTheme);\n    saveTheme ? localStorage.setItem('user-theme', newTheme) : null;\n  }\n}\n"],"names":["parcelRequire","$6RiD3","document","querySelector","addEventListener","$79801107a2301e92$var$page","$TEsX4","showTrendingMovies","$krGWQ","refs","form","async","event","preventDefault","$79801107a2301e92$var$query","currentTarget","elements","searchQuery","value","trim","console","log","paginationEl","style","display","$79801107a2301e92$export$3e457af76575b558","$79801107a2301e92$export$2e2bcd8739ae039","then","data1","totalRes","total_results","renderTrendingMovies","results","$2nhTy","makeTuiPagination","total_pages","on","page","page2","data","$31u3U","save","$h0oKa","default","catch","error","finally","reset","query1","page1","response","fetch","SEARCH_URL","API_KEY","json","message","showTime","insertAdjacentHTML","notification","textContent","setTimeout","classList","toggle","lastElementChild","remove","BASE_URL","$5844b68ee09a1fe1$export$c5604fa8028da00","res","genres","map","genre","localStorage","setItem","JSON","stringify","id","name","$b3f9deaa9d62386c$export$f1553a5662cd6555","window","this","scrollY","add","themeBtn","htmlBlock","documentElement","saveUserTheme","getItem","userTheme","matchMedia","matches","e","changeTheme","saveTheme","newTheme","currentTheme","contains"],"version":3,"file":"index.c63d1637.js.map"}