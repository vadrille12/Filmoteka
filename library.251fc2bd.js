function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return i[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"2B25S":"library.251fc2bd.js","8iIgb":"photo.e4714d22.jpg","7mVsD":"index.46670871.css","3u2jX":"index.b6e1bd8e.js"}'));var r;r=new URL(a("kyEFX").resolve("8iIgb"),import.meta.url).toString();var s=a("bnGUG"),o=a("2sH7u"),l=a("krGWQ"),c=a("h0oKa"),d=a("2nhTy");d=a("2nhTy");const u=document.querySelector(".watched-list-btn"),m=document.querySelector(".queue-list-btn");l.refs.addWatchedBtn.addEventListener("click",(function(e){1===_.length&&(0,o.emptyLibrary)();if(l.refs.addWatchedBtn.classList.contains("active-watched")){const t=Number(e.target.dataset.id);p=_.find((e=>{if(t===e.id)return e})),h(_,p.id),S()}else{_.push(p),S();document.querySelector(".empty-library").innerHTML=""}})),l.refs.addQueueBtn.addEventListener("click",(function(e){1===f.length&&(0,o.emptyLibrary)();if(l.refs.addQueueBtn.classList.contains("active-queue")){const t=Number(e.target.dataset.id);E=f.find((e=>{if(t===e.id)return e})),h(f,E.id),T()}else{f.push(E),T();document.querySelector(".empty-library").innerHTML=""}})),u.addEventListener("click",(function(){v.innerHTML="",0===_.length&&((0,o.emptyLibrary)(),l.refs.paginationEl.style.display="none");if(y.length>0){JSON.parse(localStorage.getItem("watched-movies"));g.innerHTML="";try{S()}catch(e){console.log(e.message)}}})),m.addEventListener("click",(function(){v.innerHTML="",0===f.length&&((0,o.emptyLibrary)(),l.refs.paginationEl.style.display="none");if(y){JSON.parse(localStorage.getItem("queue-movies"));g.innerHTML="";try{T()}catch(e){console.log(e.message)}}})),u.addEventListener("click",(function(){u.classList.add("js-active"),m.classList.remove("js-active")})),m.addEventListener("click",(function(){m.classList.add("js-active"),u.classList.remove("js-active")}));const v=document.querySelector(".empty-library"),g=(document.querySelector(".film-list-lib-js"),document.querySelector(".card__list--library")),_=(document.querySelector(".library-default"),JSON.parse(localStorage.getItem("watched-movies"))),f=JSON.parse(localStorage.getItem("queue-movies")),y=_.concat(f);y.filter(((e,t,i)=>i.indexOf(e)===t));function h(e,t){const i=e.findIndex((e=>e.id===t));return i>-1&&e.splice(i,1),e}S();let p=[],E=[];function b(e){return e.map((e=>localStorage.getItem(e))).join(", ")}function L(t){console.log("renderMoviesFromLibrary",t),0===_.length&&0===f.length&&(0,o.emptyLibrary)();let i="",n="";(0,s.waitingLi)();const a=t.map((({poster_path:t,title:a,genre_ids:s,release_date:o="",vote_average:l="",id:c})=>(s.length>3&&(s.splice(3,s.length-3),i=b(s),i+=", other"),i=b(s),i.length>24&&(s.pop(),i=b(s),i+=", other"),0===s.length&&(i="genre is unknown"),n=o.slice(0,4),""===n&&(n="release date unknown"),t?`<li id="${c}" class="movie__card">\n        <img\n          src="https://image.tmdb.org/t/p/w500/${t}"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">${a}</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">${i}</h3>\n          <h3 class="movie__year">${n}</h3>\n          <div class="movie__average">${l.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`:`<li  id="${c}" class="movie__card">\n        <img width="100%"\n          src="${e(r)}"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">${a}</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">${i}</h3>\n          <h3 class="movie__year">${n}</h3>\n          <div class="movie__average">${l.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`))).join("");g.innerHTML=a}function S(){setTimeout((()=>{m.classList.contains("js-active")||(console.log("call render queue"),L(_.slice(0,d.ITEM_PER_PAGE)))}),1),console.log("paginationWatched"),(0,d.makeTuiPaginationInLibrary)(_.length).on("afterMove",(({page:e})=>{L(_.slice(1===e?0:(e-1)*d.ITEM_PER_PAGE,e*d.ITEM_PER_PAGE)),(0,c.default)()}))}function T(){setTimeout((()=>{u.classList.contains("js-active")||(console.log("call render queue"),L(f.slice(0,d.ITEM_PER_PAGE)))}),1),(0,d.makeTuiPaginationInLibrary)(f.length).on("afterMove",(({page:e})=>{L(f.slice(1===e?0:(e-1)*d.ITEM_PER_PAGE,e*d.ITEM_PER_PAGE)),(0,c.default)()}))}0===_.length&&(0,o.emptyLibrary)();
//# sourceMappingURL=library.251fc2bd.js.map
