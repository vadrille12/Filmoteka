function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){s[e]=t},t.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.ac6e8810.js","8iIgb":"photo.e4714d22.jpg","7mVsD":"index.1e0c2b66.css","4JSjo":"library.84f2772a.js","3u2jX":"index.62ea6f40.js"}')),a("cqGDw"),a("krGWQ"),a("bnGUG"),a("2nhTy");var o,i=a("6RiD3"),r=a("cqGDw"),c=a("krGWQ"),l=a("2nhTy");o=new URL(a("kyEFX").resolve("8iIgb"),import.meta.url).toString();var d=a("31u3U"),u=a("h0oKa"),m=a("bnGUG");document.querySelector(".cards__list");async function h(e=1){try{const t=await(0,r.fetchTrendingMovies)(e);_(t.results),(0,d.save)("search-storage",t),(0,l.makeTuiPagination)(t.total_results,t.total_pages).on("afterMove",(({page:e})=>{(0,r.fetchTrendingMovies)(e).then((e=>{_(e.results),(0,d.save)("search-storage",e),(0,u.default)()}))}))}catch(e){console.error(e.message)}}function g(e){return e.map((e=>localStorage.getItem(e))).join(", ")}function _(t){let n="",s="";(0,m.waitingLi)();const a=t.map((({poster_path:t,title:a,genre_ids:i,release_date:r="",vote_average:c="",id:l})=>(i.length>3&&(i.splice(3,i.length-3),n=g(i),n+=", other"),n=g(i),n.length>24&&(i.pop(),n=g(i),n+=", other"),0===i.length&&(n="genre is unknown"),s=r.slice(0,4),""===s&&(s="release date unknown"),t?`<li id="${l}" class="movie__card">\n        <img\n          src="https://image.tmdb.org/t/p/w500/${t}"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">${a}</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">${n}</h3>\n          <h3 class="movie__year">${s}</h3>\n          <div class="movie__average">${c.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`:`<li  id="${l}" class="movie__card">\n        <img width="100%"\n          src="${e(o)}"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">${a}</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">${n}</h3>\n          <h3 class="movie__year">${s}</h3>\n          <div class="movie__average">${c.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`))).join("");c.refs.moviesGallery.innerHTML=a}h().then(console.log);l=a("2nhTy"),c=a("krGWQ"),d=a("31u3U"),u=a("h0oKa");document.querySelector(".header-logo__link").addEventListener("click",(function(){v=1,h(v)})),c.refs.form.addEventListener("submit",(async function(e){if(e.preventDefault(),v=1,f=e.currentTarget.elements.searchQuery.value.trim(),c.refs.paginationEl.style.display="none",""===f)return y("Search for movies is empty! Enter movie name, please",2e3),void(c.refs.paginationEl.style.display="none");await p(f,v).then((e=>{const t=e.total_results;t||y("Search result not successful. Enter the correct movie name and try again",2e3),t>=1&&(_(e.results),v+=1,(0,l.makeTuiPagination)(t,e.total_pages).on("afterMove",(({page:e})=>{p(f,e).then((e=>{_(e.results),(0,d.save)("search-storage",e),(0,u.default)()}))})))})).catch((e=>console.log(e))).finally((()=>{c.refs.form.reset()}))}));let v=1,f="";async function p(e,t){try{const n=await fetch(`${i.SEARCH_URL}?api_key=${i.API_KEY}&page=${t}&include_adult=false&query=${e}`),s=await n.json();return(0,d.save)("search-storage",s),s}catch(e){console.error()}}function y(e,t){c.refs.form.insertAdjacentHTML("beforeend",'<p class="form__uncorrect-search is-hidden"></p>');const n=document.querySelector(".form__uncorrect-search");n.textContent=`${e}`,setTimeout((()=>{n.classList.toggle("is-hidden")}),t),h(v);setTimeout((()=>{c.refs.form.lastElementChild.remove()}),2e3)}a("6RiD3");i=a("6RiD3");(async function(){try{const e=await fetch(`${i.BASE_URL}/genre/movie/list?api_key=${i.API_KEY}&language=en-US`);return await e.json()}catch(e){console.log(e.message)}})().then((e=>{e.genres.map((e=>{localStorage.setItem(JSON.stringify(e.id),e.name)}))})),a("31u3U");const w=document.querySelector("#btn--to_top");document.addEventListener("DOMContentLoaded",(function(){window.addEventListener("scroll",(function(){this.scrollY>100?w.classList.add("show"):w.classList.remove("show")}))})),a("krGWQ"),window.addEventListener("load",(function(){document.querySelector(".toggler");const e=document.querySelector(".theme-btn"),t=document.documentElement,n=localStorage.getItem("user-theme");let s;window.matchMedia&&(s=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{!n&&a()})),e&&e.addEventListener("click",(function(e){a(!0)}));function a(e=!1){let n,s=t.classList.contains("light")?"light":"dark";"light"===s?n="dark":"dark"===s&&(n="light"),t.classList.remove(s),t.classList.add(n),e&&localStorage.setItem("user-theme",n)}n?t.classList.add(n):t.classList.add(s)})),a("h0oKa"),a("37v9V"),a("gjiCh");
//# sourceMappingURL=index.ac6e8810.js.map
