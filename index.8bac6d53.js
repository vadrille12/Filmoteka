function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},t.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.8bac6d53.js","8iIgb":"photo.e4714d22.jpg","7mVsD":"index.17d40aba.css","4JSjo":"library.84f2772a.js","3u2jX":"index.1b4ae7c0.js"}')),a("cqGDw"),a("krGWQ"),a("bnGUG"),(()=>{const e={openModalStudentBtn:document.querySelector("[data-modal-footer-open]"),closeModalStudentBtn:document.querySelector("[data-modal-footer-close]"),modalStudent:document.querySelector("[data-modal-footer]")};function t(){e.modalStudent.classList.toggle("is-hidden")}e.openModalStudentBtn.addEventListener("click",t),e.closeModalStudentBtn.addEventListener("click",t)})(),a("2nhTy");var s,r=a("6RiD3"),i=a("cqGDw"),c=a("krGWQ"),l=a("2nhTy");s=new URL(a("kyEFX").resolve("8iIgb"),import.meta.url).toString();var d=a("31u3U"),u=a("h0oKa"),m=a("bnGUG");document.querySelector(".cards__list");async function h(e=1){try{const t=await(0,i.fetchTrendingMovies)(e);f(t.results),(0,d.save)("search-storage",t),(0,l.makeTuiPagination)(t.total_results,t.total_pages).on("afterMove",(({page:e})=>{(0,i.fetchTrendingMovies)(e).then((e=>{f(e.results),(0,d.save)("search-storage",e),(0,u.default)()}))}))}catch(e){console.error(e.message)}}function g(e){return e.map((e=>localStorage.getItem(e))).join(", ")}function f(t){let n="",o="";(0,m.waitingLi)();const a=t.map((({poster_path:t,title:a,genre_ids:r,release_date:i="",vote_average:c="",id:l})=>(r.length>3&&(r.splice(3,r.length-3),n=g(r),n+=", other"),n=g(r),n.length>24&&(r.pop(),n=g(r),n+=", other"),0===r.length&&(n="genre is unknown"),o=i.slice(0,4),""===o&&(o="release date unknown"),t?`<li id="${l}" class="movie__card">\n        <img\n          src="https://image.tmdb.org/t/p/w500/${t}"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">${a}</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">${n}</h3>\n          <h3 class="movie__year">${o}</h3>\n          <div class="movie__average">${c.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`:`<li  id="${l}" class="movie__card">\n        <img width="100%"\n          src="${e(s)}"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">${a}</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">${n}</h3>\n          <h3 class="movie__year">${o}</h3>\n          <div class="movie__average">${c.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`))).join("");c.refs.moviesGallery.innerHTML=a}h();l=a("2nhTy"),c=a("krGWQ"),d=a("31u3U"),u=a("h0oKa");document.querySelector(".header-logo__link").addEventListener("click",(function(){v=1,h(v)})),c.refs.form.addEventListener("submit",(async function(e){if(e.preventDefault(),v=1,_=e.currentTarget.elements.searchQuery.value.trim(),c.refs.paginationEl.style.display="none",""===_)return y("Search for movies is empty! Enter movie name, please",2e3),void(c.refs.paginationEl.style.display="none");await p(_,v).then((e=>{const t=e.total_results;t||y("Search result not successful. Enter the correct movie name and try again",2e3),t>=1&&(f(e.results),v+=1,(0,l.makeTuiPagination)(t,e.total_pages).on("afterMove",(({page:e})=>{p(_,e).then((e=>{f(e.results),(0,d.save)("search-storage",e),(0,u.default)()}))})))})).catch((e=>console.log(e))).finally((()=>{c.refs.form.reset()}))}));let v=1,_="";async function p(e,t){try{const n=await fetch(`${r.SEARCH_URL}?api_key=${r.API_KEY}&page=${t}&include_adult=false&query=${e}`),o=await n.json();return(0,d.save)("search-storage",o),o}catch(e){console.error()}}function y(e,t){c.refs.form.insertAdjacentHTML("beforeend",'<p class="form__uncorrect-search is-hidden"></p>');const n=document.querySelector(".form__uncorrect-search");n.textContent=`${e}`,setTimeout((()=>{n.classList.toggle("is-hidden")}),t),h(v);setTimeout((()=>{c.refs.form.lastElementChild.remove()}),2e3)}a("6RiD3");r=a("6RiD3");(async function(){try{const e=await fetch(`${r.BASE_URL}/genre/movie/list?api_key=${r.API_KEY}&language=en-US`);return await e.json()}catch(e){console.log(e.message)}})().then((e=>{e.genres.map((e=>{localStorage.setItem(JSON.stringify(e.id),e.name)}))})),a("31u3U");const S=document.querySelector("#btn--to_top");document.addEventListener("DOMContentLoaded",(function(){window.addEventListener("scroll",(function(){this.scrollY>100?S.classList.add("show"):S.classList.remove("show")}))})),a("krGWQ"),window.addEventListener("load",(function(){document.querySelector(".toggler");const e=document.querySelector(".theme-btn"),t=document.documentElement,n=localStorage.getItem("user-theme");let o;window.matchMedia&&(o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{!n&&a()})),e&&e.addEventListener("click",(function(e){a(!0)}));function a(e=!1){let n,o=t.classList.contains("light")?"light":"dark";"light"===o?n="dark":"dark"===o&&(n="light"),t.classList.remove(o),t.classList.add(n),e&&localStorage.setItem("user-theme",n)}n?t.classList.add(n):t.classList.add(o)})),a("h0oKa"),a("37v9V"),a("gjiCh");
//# sourceMappingURL=index.8bac6d53.js.map
