{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-5171fe21f304e6b7.js","node_modules/@parcel/runtime-js/lib/runtime-94203b52a1ceda05.js","src/js/watched.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2B25S\\\":\\\"library.4c35f3dd.js\\\",\\\"8iIgb\\\":\\\"photo.e4714d22.jpg\\\",\\\"3u2jX\\\":\\\"index.3985ac47.js\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8iIgb\")).toString();","import photo from '../images/header/photo.jpg';\nimport { waitingLi } from './modalMovie';\nimport { emptyLibrary } from './library';\nimport { refs } from './refs';\nconst watchedBtn = document.querySelector('.watched-list-btn');\nconst queueBtn = document.querySelector('.queue-list-btn');\nrefs.addWatchedBtn.addEventListener('click', removeMovieFromWatched);\nrefs.addQueueBtn.addEventListener('click', removeMovieFromQueue);\nwatchedBtn.addEventListener('click', onWatchedClick);\nqueueBtn.addEventListener('click', onQueueClick);\n\nwatchedBtn.addEventListener('click', onWatched);\nqueueBtn.addEventListener('click', onQueueBtn);\n\nfunction onWatched() {\n  watchedBtn.classList.add('js-active');\n  queueBtn.classList.remove('js-active');\n}\n\nfunction onQueueBtn() {\n  queueBtn.classList.add('js-active');\n  watchedBtn.classList.remove('js-active');\n}\n\nconst container = document.querySelector('.empty-library');\nconst listLib = document.querySelector('.film-list-lib-js');\nconst listCardsLibrary = document.querySelector('.card__list--library');\nconst libraryBtn = document.querySelector('.library-default');\n\nconst LOCAL_STORAGE_KEY_WATCHED = 'watched-movies';\nconst LOCAL_STORAGE_KEY_QUEUE = 'queue-movies';\nconst saveDataWatched = JSON.parse(\n  localStorage.getItem(LOCAL_STORAGE_KEY_WATCHED)\n);\n\nconst saveDataQueue = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_QUEUE));\nconst saveDataAll = saveDataWatched.concat(saveDataQueue);\n\nconst savedDataAllQniue = saveDataAll.filter(\n  (data, index, array) => array.indexOf(data) === index\n);\n\nrenderMoviesFromLibrary(saveDataWatched);\n\nfunction removeObjectWithId(arr, id) {\n  const objWithIdIndex = arr.findIndex(obj => obj.id === id);\n\n  if (objWithIdIndex > -1) {\n    arr.splice(objWithIdIndex, 1);\n  }\n\n  return arr;\n}\n\nlet idforRemovingFilm = [];\nlet idForRemovinigFilmQueue = [];\n\nif (saveDataWatched.length === 0) {\n  emptyLibrary();\n}\n\nfunction removeMovieFromWatched(e) {\n  if (saveDataWatched.length === 1) {\n    emptyLibrary();\n  }\n\n  if (refs.addWatchedBtn.classList.contains('active-watched')) {\n    const forDeleteId = Number(e.target.dataset.id);\n    idforRemovingFilm = saveDataWatched.find(film => {\n      if (forDeleteId === film.id) {\n        return film;\n      }\n    });\n\n    removeObjectWithId(saveDataWatched, idforRemovingFilm.id);\n    renderMoviesFromLibrary(saveDataWatched);\n  } else {\n    saveDataWatched.push(idforRemovingFilm);\n    renderMoviesFromLibrary(saveDataWatched);\n    const refEmptyLibrary = document.querySelector('.empty-library');\n    refEmptyLibrary.innerHTML = '';\n  }\n}\n\nfunction removeMovieFromQueue(e) {\n  if (saveDataQueue.length === 1) {\n    emptyLibrary();\n  }\n\n  if (refs.addQueueBtn.classList.contains('active-queue')) {\n    const forDeleteId = Number(e.target.dataset.id);\n    idForRemovinigFilmQueue = saveDataQueue.find(film => {\n      if (forDeleteId === film.id) {\n        console.log(film.id);\n        return film;\n      }\n    });\n    removeObjectWithId(saveDataQueue, idForRemovinigFilmQueue.id);\n    renderMoviesFromLibrary(saveDataQueue);\n  } else {\n    saveDataQueue.push(idForRemovinigFilmQueue);\n    renderMoviesFromLibrary(saveDataQueue);\n    const refEmptyLibrary = document.querySelector('.empty-library');\n    refEmptyLibrary.innerHTML = '';\n  }\n}\n\nexport function onWatchedClick() {\n  container.innerHTML = '';\n  if (saveDataWatched.length === 0) {\n    emptyLibrary();\n  }\n  if (saveDataAll.length > 0) {\n    const saveDataWatched = JSON.parse(\n      localStorage.getItem(LOCAL_STORAGE_KEY_WATCHED)\n    );\n    listCardsLibrary.innerHTML = '';\n\n    try {\n      renderMoviesFromLibrary(saveDataWatched);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n}\n\nfunction onQueueClick() {\n  container.innerHTML = '';\n  if (saveDataQueue.length === 0) {\n    emptyLibrary();\n  }\n\n  if (saveDataAll) {\n    const saveDataQueue = JSON.parse(\n      localStorage.getItem(LOCAL_STORAGE_KEY_QUEUE)\n    );\n\n    listCardsLibrary.innerHTML = '';\n    try {\n      renderMoviesFromLibrary(saveDataQueue);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n}\n\nfunction getGenres(genresArr) {\n  return genresArr.map(genre => localStorage.getItem(genre)).join(', ');\n}\n\nexport function renderMoviesFromLibrary(data) {\n  if (saveDataWatched.length === 0 && saveDataQueue.length === 0) {\n    emptyLibrary();\n  }\n\n  const urlImage = 'https://image.tmdb.org/t/p/w500/';\n  let genresName = '';\n  let releaseYear = '';\n  waitingLi();\n  const cardMarkupLibrary = data\n    .map(\n      ({\n        poster_path,\n        title,\n        genre_ids: genres,\n        release_date = '',\n        vote_average = '',\n        id,\n      }) => {\n        if (genres.length > 3) {\n          genres.splice(3, genres.length - 3);\n\n          genresName = getGenres(genres);\n          genresName = genresName + ', other';\n        }\n\n        genresName = getGenres(genres);\n\n        if (genresName.length > 24) {\n          genres.pop();\n\n          genresName = getGenres(genres);\n          genresName = genresName + ', other';\n        }\n\n        if (genres.length === 0) {\n          genresName = 'genre is unknown';\n        }\n\n        releaseYear = release_date.slice(0, 4);\n        if (releaseYear === '') {\n          releaseYear = 'release date unknown';\n        }\n\n        if (!poster_path) {\n          return `<li  id=\"${id}\" class=\"movie__card\">\n        <img width=\"100%\"\n          src=\"${photo}\"\n          class=\"movie__cover\"\n        />\n        <div class=\"movie__info\">\n        <h2 class=\"movie__title\">${title}</h2>\n        <div class=\"movie__item\">\n          <h3 class=\"movie__category\">${genresName}</h3>\n          <h3 class=\"movie__year\">${releaseYear}</h3>\n          <div class=\"movie__average\">${vote_average.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`;\n        } else {\n          return `<li id=\"${id}\" class=\"movie__card\">\n        <img\n          src=\"${urlImage}${poster_path}\"\n          class=\"movie__cover\"\n        />\n        <div class=\"movie__info\">\n        <h2 class=\"movie__title\">${title}</h2>\n        <div class=\"movie__item\">\n          <h3 class=\"movie__category\">${genresName}</h3>\n          <h3 class=\"movie__year\">${releaseYear}</h3>\n          <div class=\"movie__average\">${vote_average.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`;\n        }\n      }\n    )\n    .join('');\n\n  listCardsLibrary.innerHTML = cardMarkupLibrary;\n}\n"],"names":["parcelRequire","register","JSON","parse","$d729b21930bfad69$exports","URL","resolve","import","meta","url","toString","$7126a8cfa5cf9b17$var$watchedBtn","document","querySelector","$7126a8cfa5cf9b17$var$queueBtn","$krGWQ","refs","addWatchedBtn","addEventListener","e","$7126a8cfa5cf9b17$var$saveDataWatched","length","$2sH7u","emptyLibrary","classList","contains","forDeleteId","Number","target","dataset","id","$7126a8cfa5cf9b17$var$idforRemovingFilm","find","film","$7126a8cfa5cf9b17$var$removeObjectWithId","$7126a8cfa5cf9b17$export$aafe6978ec2a425c","push","innerHTML","addQueueBtn","$7126a8cfa5cf9b17$var$saveDataQueue","$7126a8cfa5cf9b17$var$idForRemovinigFilmQueue","console","log","$7126a8cfa5cf9b17$var$container","$7126a8cfa5cf9b17$var$saveDataAll","saveDataWatched1","localStorage","getItem","$7126a8cfa5cf9b17$var$listCardsLibrary","error","message","saveDataQueue1","add","remove","concat","filter","data","index","array","indexOf","arr","objWithIdIndex","findIndex","obj","splice","$7126a8cfa5cf9b17$var$getGenres","genresArr","map","genre","join","genresName","releaseYear","$bnGUG","waitingLi","cardMarkupLibrary","poster_path","title","genre_ids","genres","release_date","vote_average","pop","slice","toFixed","$parcel$interopDefault"],"version":3,"file":"library.4c35f3dd.js.map"}