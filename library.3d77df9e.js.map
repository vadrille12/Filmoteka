{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-625dd5077a437416.js","node_modules/@parcel/runtime-js/lib/runtime-979de4d2464bac78.js","src/js/watched.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jtkoo\\\":\\\"library.3d77df9e.js\\\",\\\"DKcCc\\\":\\\"photo.e4714d22.jpg\\\",\\\"7mVsD\\\":\\\"index.17d40aba.css\\\",\\\"imKXO\\\":\\\"index.9937f294.js\\\"}\"));","module.exports = require('./helpers/bundle-url').getBundleURL('jtkoo') + require('./helpers/bundle-manifest').resolve(\"DKcCc\");","import photo from '../images/header/photo.jpg';\nimport { waitingLi } from './modalMovie';\nimport { emptyLibrary } from './library';\nimport { refs } from './refs';\nimport scrollToTop from './scrollToTop';\nimport { makeTuiPaginationInLibrary } from './pagination';\nimport { ITEM_PER_PAGE } from './pagination';\n\nconst watchedBtn = document.querySelector('.watched-list-btn');\nconst queueBtn = document.querySelector('.queue-list-btn');\nrefs.addWatchedBtn.addEventListener('click', removeMovieFromWatched);\nrefs.addQueueBtn.addEventListener('click', removeMovieFromQueue);\nwatchedBtn.addEventListener('click', onWatchedClick);\nqueueBtn.addEventListener('click', onQueueClick);\n\nwatchedBtn.addEventListener('click', onWatched);\nqueueBtn.addEventListener('click', onQueueBtn);\n\nfunction onWatched() {\n  watchedBtn.classList.add('js-active');\n  queueBtn.classList.remove('js-active');\n}\n\nfunction onQueueBtn() {\n  queueBtn.classList.add('js-active');\n  watchedBtn.classList.remove('js-active');\n}\n\nconst container = document.querySelector('.empty-library');\nconst listLib = document.querySelector('.film-list-lib-js');\nconst listCardsLibrary = document.querySelector('.card__list--library');\nconst libraryBtn = document.querySelector('.library-default');\n\nconst LOCAL_STORAGE_KEY_WATCHED = 'watched-movies';\nconst LOCAL_STORAGE_KEY_QUEUE = 'queue-movies';\nconst saveDataWatched = JSON.parse(\n  localStorage.getItem(LOCAL_STORAGE_KEY_WATCHED)\n);\n\nconst saveDataQueue = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_QUEUE));\nconst saveDataAll = saveDataWatched.concat(saveDataQueue);\n\nconst savedDataAllQniue = saveDataAll.filter(\n  (data, index, array) => array.indexOf(data) === index\n);\n\npaginationWatched();\n\nfunction removeObjectWithId(arr, id) {\n  const objWithIdIndex = arr.findIndex(obj => obj.id === id);\n\n  if (objWithIdIndex > -1) {\n    arr.splice(objWithIdIndex, 1);\n  }\n\n  return arr;\n}\n\nlet idforRemovingFilm = [];\nlet idForRemovinigFilmQueue = [];\n\nif (saveDataWatched.length === 0) {\n  emptyLibrary();\n}\n\nfunction removeMovieFromWatched(e) {\n  if (saveDataWatched.length === 1) {\n    emptyLibrary();\n  }\n\n  if (refs.addWatchedBtn.classList.contains('active-watched')) {\n    const forDeleteId = Number(e.target.dataset.id);\n    idforRemovingFilm = saveDataWatched.find(film => {\n      if (forDeleteId === film.id) {\n        return film;\n      }\n    });\n\n    removeObjectWithId(saveDataWatched, idforRemovingFilm.id);\n    paginationWatched();\n  } else {\n    saveDataWatched.push(idforRemovingFilm);\n    paginationWatched();\n    const refEmptyLibrary = document.querySelector('.empty-library');\n    refEmptyLibrary.innerHTML = '';\n  }\n}\n\nfunction removeMovieFromQueue(e) {\n  if (saveDataQueue.length === 1) {\n    emptyLibrary();\n  }\n\n  if (refs.addQueueBtn.classList.contains('active-queue')) {\n    const forDeleteId = Number(e.target.dataset.id);\n    idForRemovinigFilmQueue = saveDataQueue.find(film => {\n      if (forDeleteId === film.id) {\n        // console.log(film.id);\n        return film;\n      }\n    });\n    removeObjectWithId(saveDataQueue, idForRemovinigFilmQueue.id);\n    paginationQueue();\n  } else {\n    saveDataQueue.push(idForRemovinigFilmQueue);\n    paginationQueue();\n    const refEmptyLibrary = document.querySelector('.empty-library');\n    refEmptyLibrary.innerHTML = '';\n  }\n}\n\nexport function onWatchedClick() {\n\n\n  container.innerHTML = '';\n  if (saveDataWatched.length === 0) {\n    emptyLibrary();\n    refs.paginationEl.style.display = 'none';\n  }\n  if (saveDataAll.length > 0) {\n    const saveDataWatched = JSON.parse(\n      localStorage.getItem(LOCAL_STORAGE_KEY_WATCHED)\n    );\n    listCardsLibrary.innerHTML = '';\n\n    try {\n      //renderMoviesFromLibrary(saveDataWatched);\n      paginationWatched();\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n}\n\nfunction onQueueClick() {\n  container.innerHTML = '';\n  if (saveDataQueue.length === 0) {\n    emptyLibrary();\n    refs.paginationEl.style.display = 'none';\n  }\n\n  if (saveDataAll) {\n    const saveDataQueue = JSON.parse(\n      localStorage.getItem(LOCAL_STORAGE_KEY_QUEUE)\n    );\n\n    listCardsLibrary.innerHTML = '';\n    try {\n      //renderMoviesFromLibrary(saveDataQueue);\n      paginationQueue();\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n}\n\nfunction getGenres(genresArr) {\n  return genresArr.map(genre => localStorage.getItem(genre)).join(', ');\n}\n\nexport function renderMoviesFromLibrary(data) {\n\n\n  // console.log('renderMoviesFromLibrary', data)\n\n  if (saveDataWatched.length === 0 && saveDataQueue.length === 0) {\n    emptyLibrary();\n  }\n\n  const urlImage = 'https://image.tmdb.org/t/p/w500/';\n  let genresName = '';\n  let releaseYear = '';\n  waitingLi();\n  const cardMarkupLibrary = data\n    .map(\n      ({\n        poster_path,\n        title,\n        genre_ids: genres,\n        release_date = '',\n        vote_average = '',\n        id,\n      }) => {\n        if (genres.length > 3) {\n          genres.splice(3, genres.length - 3);\n\n          genresName = getGenres(genres);\n          genresName = genresName + ', other';\n        }\n\n        genresName = getGenres(genres);\n\n        if (genresName.length > 24) {\n          genres.pop();\n\n          genresName = getGenres(genres);\n          genresName = genresName + ', other';\n        }\n\n        if (genres.length === 0) {\n          genresName = 'genre is unknown';\n        }\n\n        releaseYear = release_date.slice(0, 4);\n        if (releaseYear === '') {\n          releaseYear = 'release date unknown';\n        }\n\n        if (!poster_path) {\n          return `<li  id=\"${id}\" class=\"movie__card\">\n        <img width=\"100%\"\n          src=\"${photo}\"\n          class=\"movie__cover\"\n        />\n        <div class=\"movie__info\">\n        <h2 class=\"movie__title\">${title}</h2>\n        <div class=\"movie__item\">\n          <h3 class=\"movie__category\">${genresName}</h3>\n          <h3 class=\"movie__year\">${releaseYear}</h3>\n          <div class=\"movie__average\">${vote_average.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`;\n        } else {\n          return `<li id=\"${id}\" class=\"movie__card\">\n        <img\n          src=\"${urlImage}${poster_path}\"\n          class=\"movie__cover\"\n        />\n        <div class=\"movie__info\">\n        <h2 class=\"movie__title\">${title}</h2>\n        <div class=\"movie__item\">\n          <h3 class=\"movie__category\">${genresName}</h3>\n          <h3 class=\"movie__year\">${releaseYear}</h3>\n          <div class=\"movie__average\">${vote_average.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`;\n        }\n      }\n    )\n    .join('');\n\n  listCardsLibrary.innerHTML = cardMarkupLibrary;\n}\n\nfunction paginationWatched() {\n\n\n\n  setTimeout(() => {\n    if (!queueBtn.classList.contains('js-active')) {\n      // console.log('call render queue')\n      renderMoviesFromLibrary(saveDataWatched.slice(0, ITEM_PER_PAGE));\n    }\n\n  }, 1)\n\n\n  // console.log('paginationWatched')\n\n  makeTuiPaginationInLibrary(saveDataWatched.length).on(\n    'afterMove',\n    ({ page }) => {\n      renderMoviesFromLibrary(\n        saveDataWatched.slice(\n          page === 1 ? 0 : (page - 1) * ITEM_PER_PAGE,\n          page * ITEM_PER_PAGE\n        )\n      );\n      scrollToTop();\n    }\n  );\n}\n\nfunction paginationQueue() {\n\n  setTimeout(() => {\n    if (!watchedBtn.classList.contains('js-active')) {\n      // console.log('call render queue')\n      renderMoviesFromLibrary(saveDataQueue.slice(0, ITEM_PER_PAGE));\n    }\n\n  }, 1)\n\n  makeTuiPaginationInLibrary(saveDataQueue.length).on(\n    'afterMove',\n    ({ page }) => {\n      renderMoviesFromLibrary(\n        saveDataQueue.slice(\n          page === 1 ? 0 : (page - 1) * ITEM_PER_PAGE,\n          page * ITEM_PER_PAGE\n        )\n      );\n      scrollToTop();\n    }\n  );\n}\n"],"names":["parcelRequire","register","JSON","parse","$7e4ef6c3a5802a8f$exports","getBundleURL","resolve","$a215baf1061f969f$var$watchedBtn","document","querySelector","$a215baf1061f969f$var$queueBtn","$4Nugj","refs","addWatchedBtn","addEventListener","e","$a215baf1061f969f$var$saveDataWatched","length","$cHsZg","emptyLibrary","classList","contains","forDeleteId","Number","target","dataset","id","$a215baf1061f969f$var$idforRemovingFilm","find","film","$a215baf1061f969f$var$removeObjectWithId","$a215baf1061f969f$var$paginationWatched","push","innerHTML","addQueueBtn","$a215baf1061f969f$var$saveDataQueue","$a215baf1061f969f$var$idForRemovinigFilmQueue","$a215baf1061f969f$var$paginationQueue","$a215baf1061f969f$var$container","paginationEl","style","display","$a215baf1061f969f$var$saveDataAll","localStorage","getItem","$a215baf1061f969f$var$LOCAL_STORAGE_KEY_WATCHED","$a215baf1061f969f$var$listCardsLibrary","error","console","log","message","$a215baf1061f969f$var$LOCAL_STORAGE_KEY_QUEUE","add","remove","concat","filter","data","index","array","indexOf","arr","objWithIdIndex","findIndex","obj","splice","$a215baf1061f969f$var$getGenres","genresArr","map","genre","join","$a215baf1061f969f$export$aafe6978ec2a425c","genresName","releaseYear","$8AEpj","waitingLi","cardMarkupLibrary","param","poster_path","title","genres","genre_ids","_release_date","release_date","_vote_average","vote_average","pop","slice","toFixed","$parcel$interopDefault","setTimeout","$jcFG7","ITEM_PER_PAGE","makeTuiPaginationInLibrary","on","page","$bKWtT","default"],"version":3,"file":"library.3d77df9e.js.map"}