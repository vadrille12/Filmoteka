{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-ab64356cfd7e6b4f.js","src/index.js","src/js/filmSearch.js","src/js/filmCard.js","node_modules/@parcel/runtime-js/lib/runtime-076376cf8d25ce2f.js","src/js/fetchGenres.js","src/js/backToTopBtn.js","src/js/switchDayNight.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.5bffc602.js\\\",\\\"DKcCc\\\":\\\"photo.e4714d22.jpg\\\",\\\"7mVsD\\\":\\\"index.46670871.css\\\",\\\"7RaHS\\\":\\\"library.20ab676f.js\\\",\\\"imKXO\\\":\\\"index.92c56545.js\\\"}\"));","import './js/fetchAPI';\nimport './js/refs';\nimport './js/modalMovie';\nimport './js/modalStudents';\nimport './js/pagination';\nimport './js/filmSearch';\nimport './js/filmCard';\nimport './js/api-vars';\nimport './js/fetchGenres';\nimport './js/localStorage';\nimport './js/backToTopBtn';\nimport './js/switchDayNight';\nimport './js/scrollToTop';\nimport './js/trailer';\n// import './js/watched';\n// import './js/library';\nimport './js/loader';\n","import { API_KEY, BASE_URL, TREND_URL, SEARCH_URL } from './api-vars.js';\nimport { showTrendingMovies } from './filmCard';\nimport { renderTrendingMovies } from './filmCard';\nimport { makeTuiPagination } from './pagination.js';\nimport { refs } from './refs';\nimport { load, save, remove } from './localStorage';\nimport scrollToTop from './scrollToTop.js';\n//import {fetchTrendingMovies} from './fetchAPI'\n\nconst logo = document.querySelector('.header-logo__link');\nlogo.addEventListener('click', onClickLogo);\n\nrefs.form.addEventListener('submit', onFormSubmit);\nlet page = 1;\nlet query = '';\n\nexport default async function fetchMovie(query, page) {\n  try {\n    const response = await fetch(\n      `${SEARCH_URL}?api_key=${API_KEY}&page=${page}&include_adult=false&query=${query}`\n    );\n    const data = await response.json();\n    save('search-storage', data);\n    return data;\n  } catch (error) {\n    console.error();\n  }\n}\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  query = event.currentTarget.elements.searchQuery.value.trim();\n  // console.log(query);\n  refs.paginationEl.style.display = 'none';\n\n  if (query === '') {\n    invalidSearch('Search for movies is empty! Enter movie name, please', 2000);\n    refs.paginationEl.style.display = 'none';\n    return;\n  }\n  await fetchMovie(query, page)\n    .then(data => {\n      // console.log(data);\n      const totalRes = data.total_results;\n      // console.log(totalRes);\n      if (!totalRes) {\n        invalidSearch(\n          'Search result not successful. Enter the correct movie name and try again',\n          2000\n        );\n        //refs.paginationEl.style.display = 'none';\n      }\n\n      if (totalRes >= 1) {\n        renderTrendingMovies(data.results);\n        page += 1;\n        makeTuiPagination(totalRes, data.total_pages).on(\n          'afterMove',\n          ({ page }) => {\n            fetchMovie(query, page).then(data => {\n              renderTrendingMovies(data.results);\n              save('search-storage', data);\n              scrollToTop();\n            });\n          }\n        );\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      refs.form.reset();\n    });\n}\n\nexport function invalidSearch(message, showTime) {\n  refs.form.insertAdjacentHTML(\n    'beforeend',\n    '<p class=\"form__uncorrect-search is-hidden\"></p>'\n  );\n  const notification = document.querySelector('.form__uncorrect-search');\n  notification.textContent = `${message}`;\n  setTimeout(() => {\n    notification.classList.toggle('is-hidden');\n  }, showTime);\n\n  showTrendingMovies(page);\n\n  const removeNotification = setTimeout(() => {\n    refs.form.lastElementChild.remove();\n  }, 2000);\n}\n\nfunction onClickLogo() {\n  page = 1;\n  showTrendingMovies(page);\n}\n","import { fetchTrendingMovies } from './fetchAPI';\nimport { refs } from './refs';\nimport { makeTuiPagination } from './pagination';\nimport photo from '../images/header/photo.jpg';\nimport { save } from './localStorage';\nimport scrollToTop from './scrollToTop';\nimport { waitingLi } from './modalMovie';\n\nconst moviesGallery = document.querySelector('.cards__list');\n\nlet page = 1;\n\nexport async function showTrendingMovies(page = 1) {\n  try {\n    const data = await fetchTrendingMovies(page);\n    // console.log(data);\n    renderTrendingMovies(data.results);\n    save('search-storage', data);\n\n    makeTuiPagination(data.total_results, data.total_pages).on(\n      'afterMove',\n      ({ page }) => {\n        fetchTrendingMovies(page).then(data => {\n          renderTrendingMovies(data.results);\n          save('search-storage', data);\n          scrollToTop();\n        });\n      }\n    );\n  } catch (err) {\n    console.error(err.message);\n  }\n}\n\nshowTrendingMovies().then(console.log);\n\nfunction getGenres(genresArr) {\n  return genresArr.map(genre => localStorage.getItem(genre)).join(', ');\n}\n\nexport function renderTrendingMovies(data) {\n  const urlImage = 'https://image.tmdb.org/t/p/w500/';\n  let genresName = '';\n  let releaseYear = '';\n  waitingLi();\n  const cardMarkup = data\n    .map(\n      ({\n        poster_path,\n        title,\n        genre_ids: genres,\n        release_date = '',\n        vote_average = '',\n        id,\n      }) => {\n        if (genres.length > 3) {\n          genres.splice(3, genres.length - 3);\n\n          genresName = getGenres(genres);\n          genresName = genresName + ', other';\n        }\n\n        genresName = getGenres(genres);\n\n        if (genresName.length > 24) {\n          genres.pop();\n\n          genresName = getGenres(genres);\n          genresName = genresName + ', other';\n        }\n\n        if (genres.length === 0) {\n          genresName = 'genre is unknown';\n        }\n\n        releaseYear = release_date.slice(0, 4);\n        if (releaseYear === '') {\n          releaseYear = 'release date unknown';\n        }\n\n        if (!poster_path) {\n          return `<li  id=\"${id}\" class=\"movie__card\">\n        <img width=\"100%\"\n          src=\"${photo}\"\n          class=\"movie__cover\"\n        />\n        <div class=\"movie__info\">\n        <h2 class=\"movie__title\">${title}</h2>\n        <div class=\"movie__item\">\n          <h3 class=\"movie__category\">${genresName}</h3>\n          <h3 class=\"movie__year\">${releaseYear}</h3>\n          <div class=\"movie__average\">${vote_average.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`;\n        } else {\n          return `<li id=\"${id}\" class=\"movie__card\">\n        <img\n          src=\"${urlImage}${poster_path}\"\n          class=\"movie__cover\"\n        />\n        <div class=\"movie__info\">\n        <h2 class=\"movie__title\">${title}</h2>\n        <div class=\"movie__item\">\n          <h3 class=\"movie__category\">${genresName}</h3>\n          <h3 class=\"movie__year\">${releaseYear}</h3>\n          <div class=\"movie__average\">${vote_average.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`;\n        }\n      }\n    )\n    .join('');\n\n  refs.moviesGallery.innerHTML = cardMarkup;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"DKcCc\");","import { API_KEY, BASE_URL } from './/api-vars.js';\n\nexport async function getGenres() {\n  try {\n    const response = await fetch(\n      `${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=en-US`\n    );\n    const respGenres = await response.json();\n\n    return respGenres;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nexport function genresToLocalStorage(arr) {\n  arr.map(genre => {\n    localStorage.setItem(JSON.stringify(genre.id), genre.name);\n  });\n}\n\ngetGenres().then(res => {\n  genresToLocalStorage(res.genres);\n});\n","export const btnToTop = document.querySelector('#btn--to_top');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  window.addEventListener('scroll', function () {\n    if (this.scrollY > 100) {\n      btnToTop.classList.add('show');\n    } else {\n      btnToTop.classList.remove('show');\n    }\n  });\n});\n","import { refs } from './refs';\n\n\nwindow.addEventListener('load', windowLoad);\n\nexport function windowLoad() {\n  const toggler = document.querySelector('.toggler');\n  const themeBtn = document.querySelector('.theme-btn');\n  const htmlBlock = document.documentElement;\n  const saveUserTheme = localStorage.getItem('user-theme');\n \n  let userTheme;\n  if (window.matchMedia) {\n    userTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\n      ? 'dark'\n      : 'light';\n  }\n  window\n    .matchMedia('(prefers-color-scheme: dark)')\n    .addEventListener('change', e => {\n      !saveUserTheme ? changeTheme() : null;\n    });\n\n  if (themeBtn) {\n    themeBtn.addEventListener('click', function (e) {\n      changeTheme(true);\n    });\n  }\n\n  function setThemeClass() {\n    if (saveUserTheme) {\n      htmlBlock.classList.add(saveUserTheme);\n    } else {\n      htmlBlock.classList.add(userTheme);\n    }\n  }\n  setThemeClass();\n\n  function changeTheme(saveTheme = false) {\n    let currentTheme = htmlBlock.classList.contains('light') ? 'light' : 'dark';\n    let newTheme;\n    if (currentTheme === 'light') {\n      newTheme = 'dark';\n    } else if (currentTheme === 'dark') {\n      newTheme = 'light';\n    }\n    htmlBlock.classList.remove(currentTheme);\n    htmlBlock.classList.add(newTheme);\n    saveTheme ? localStorage.setItem('user-theme', newTheme) : null;\n  }\n}\n"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$217a02499ecc3312$exports","getBundleURL","resolve","document","querySelector","$233d911c17689cf1$export$2e39d0d53b532317","$233d911c17689cf1$var$_showTrendingMovies","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","page1","data1","_args","length","$lbRHt","fetchTrendingMovies","$233d911c17689cf1$export$ae4a60d31ab53252","_ctx","sent","results","$UL92Z","save","$jcFG7","makeTuiPagination","total_results","total_pages","on","param","page2","page","then","data","$bKWtT","default","console","error","t0","message","$233d911c17689cf1$var$getGenres","genresArr","map","genre","localStorage","getItem","join","genresName","releaseYear","$8AEpj","waitingLi","cardMarkup","poster_path","title","genres","genre_ids","_release_date","release_date","_vote_average","vote_average","id","splice","pop","slice","concat","toFixed","$4Nugj","refs","moviesGallery","innerHTML","log","addEventListener","$927468236d9ebec1$var$page","form","event","$927468236d9ebec1$var$_onFormSubmit","$927468236d9ebec1$var$query","query1","$927468236d9ebec1$var$_fetchMovie","response","fetch","$ajzNc","SEARCH_URL","API_KEY","json","preventDefault","currentTarget","elements","searchQuery","value","trim","paginationEl","style","display","$927468236d9ebec1$export$3e457af76575b558","$927468236d9ebec1$export$2e2bcd8739ae039","totalRes","catch","finally","reset","showTime","insertAdjacentHTML","notification","textContent","setTimeout","classList","toggle","lastElementChild","remove","$26f18cb28b6ef3bc$var$_getGenres","respGenres","BASE_URL","$26f18cb28b6ef3bc$export$c5604fa8028da00","res","setItem","stringify","name","$00c094bf35d5b22a$export$f1553a5662cd6555","window","scrollY","add","userTheme","themeBtn","htmlBlock","documentElement","saveUserTheme","matchMedia","matches","e","changeTheme","newTheme","saveTheme","currentTheme","contains"],"version":3,"file":"index.5bffc602.js.map"}