!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,n){i[e]=n},n.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"jtkoo":"library.f8336333.js","DKcCc":"photo.e4714d22.jpg","7mVsD":"index.17d40aba.css","imKXO":"index.9937f294.js"}'));var r;r=a("aNJCr").getBundleURL("jtkoo")+a("iE7OH").resolve("DKcCc");var c=a("8AEpj"),o=a("cHsZg"),s=a("4Nugj"),l=a("bKWtT"),d=a("jcFG7"),u=(d=a("jcFG7"),document.querySelector(".watched-list-btn")),v=document.querySelector(".queue-list-btn");s.refs.addWatchedBtn.addEventListener("click",(function(e){1===p.length&&(0,o.emptyLibrary)();if(s.refs.addWatchedBtn.classList.contains("active-watched")){var n=Number(e.target.dataset.id);L=p.find((function(e){if(n===e.id)return e})),E(p,L.id),j()}else{p.push(L),j(),document.querySelector(".empty-library").innerHTML=""}})),s.refs.addQueueBtn.addEventListener("click",(function(e){1===y.length&&(0,o.emptyLibrary)();if(s.refs.addQueueBtn.classList.contains("active-queue")){var n=Number(e.target.dataset.id);b=y.find((function(e){if(n===e.id)return e})),E(y,b.id),H()}else{y.push(b),H(),document.querySelector(".empty-library").innerHTML=""}})),u.addEventListener("click",(function(){f.innerHTML="",0===p.length&&((0,o.emptyLibrary)(),s.refs.paginationEl.style.display="none");if(h.length>0){JSON.parse(localStorage.getItem(m));g.innerHTML="";try{j()}catch(e){console.log(e.message)}}})),v.addEventListener("click",(function(){f.innerHTML="",0===y.length&&((0,o.emptyLibrary)(),s.refs.paginationEl.style.display="none");if(h){JSON.parse(localStorage.getItem(_));g.innerHTML="";try{H()}catch(e){console.log(e.message)}}})),u.addEventListener("click",(function(){u.classList.add("js-active"),v.classList.remove("js-active")})),v.addEventListener("click",(function(){v.classList.add("js-active"),u.classList.remove("js-active")}));var f=document.querySelector(".empty-library"),g=(document.querySelector(".film-list-lib-js"),document.querySelector(".card__list--library")),m=(document.querySelector(".library-default"),"watched-movies"),_="queue-movies",p=JSON.parse(localStorage.getItem(m)),y=JSON.parse(localStorage.getItem(_)),h=p.concat(y);h.filter((function(e,n,t){return t.indexOf(e)===n}));function E(e,n){var t=e.findIndex((function(e){return e.id===n}));return t>-1&&e.splice(t,1),e}j();var L=[],b=[];function S(e){return e.map((function(e){return localStorage.getItem(e)})).join(", ")}function T(n){console.log("renderMoviesFromLibrary",n),0===p.length&&0===y.length&&(0,o.emptyLibrary)();var t="",i="";(0,c.waitingLi)();var a=n.map((function(n){var a=n.poster_path,c=n.title,o=n.genre_ids,s=n.release_date,l=void 0===s?"":s,d=n.vote_average,u=void 0===d?"":d,v=n.id;return o.length>3&&(o.splice(3,o.length-3),t=S(o),t+=", other"),(t=S(o)).length>24&&(o.pop(),t=S(o),t+=", other"),0===o.length&&(t="genre is unknown"),""===(i=l.slice(0,4))&&(i="release date unknown"),a?'<li id="'.concat(v,'" class="movie__card">\n        <img\n          src="').concat("https://image.tmdb.org/t/p/w500/").concat(a,'"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">').concat(c,'</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">').concat(t,'</h3>\n          <h3 class="movie__year">').concat(i,'</h3>\n          <div class="movie__average">').concat(u.toFixed(1),"</div>\n        </div>\n      </div>\n      </li>"):'<li  id="'.concat(v,'" class="movie__card">\n        <img width="100%"\n          src="').concat(e(r),'"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">').concat(c,'</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">').concat(t,'</h3>\n          <h3 class="movie__year">').concat(i,'</h3>\n          <div class="movie__average">').concat(u.toFixed(1),"</div>\n        </div>\n      </div>\n      </li>")})).join("");g.innerHTML=a}function j(){setTimeout((function(){v.classList.contains("js-active")||(console.log("call render queue"),T(p.slice(0,d.ITEM_PER_PAGE)))}),1),console.log("paginationWatched"),(0,d.makeTuiPaginationInLibrary)(p.length).on("afterMove",(function(e){var n=e.page;T(p.slice(1===n?0:(n-1)*d.ITEM_PER_PAGE,n*d.ITEM_PER_PAGE)),(0,l.default)()}))}function H(){setTimeout((function(){u.classList.contains("js-active")||(console.log("call render queue"),T(y.slice(0,d.ITEM_PER_PAGE)))}),1),(0,d.makeTuiPaginationInLibrary)(y.length).on("afterMove",(function(e){var n=e.page;T(y.slice(1===n?0:(n-1)*d.ITEM_PER_PAGE,n*d.ITEM_PER_PAGE)),(0,l.default)()}))}0===p.length&&(0,o.emptyLibrary)()}();
//# sourceMappingURL=library.f8336333.js.map
