{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/fetchAPI.js","src/js/api-vars.js","src/js/localStorage.js","src/js/modalMovie.js","node_modules/@parcel/runtime-js/lib/runtime-94203b52a1ceda05.js","src/js/refs.js","src/js/trailer.js","node_modules/@parcel/runtime-js/lib/runtime-d8398157b657f82e.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { API_KEY, BASE_URL, TREND_URL, TRAILER_URL } from './/api-vars.js';\n// import showTrendingMovies from './/filmCard';\nimport { save } from './localStorage';\n\nexport async function fetchTrendingMovies(page = 1) {\n  try {\n    const options = {\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n      },\n\n      //   results,\n    };\n    const resp = await fetch(\n      `${TREND_URL}?api_key=${API_KEY}&page=${page}`,\n      options\n    );\n    const respData = await resp.json();\n    save('trending-movies', respData);\n    // console.log(respData);\n    return respData;\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n\n// (async function () {\n//   const data = await fetchTrendingMovies();\n//   //   console.log(data);\n// })();\n\n//===============FETCH TRAILER\nexport async function fetchTrailer(filmId) {\n  try {\n    const response = await fetch(\n      `${TRAILER_URL}/${filmId}/videos?api_key=${API_KEY}&language=en-US`\n    );\n    const respTrailer = await response.json();\n\n    return respTrailer;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n","const API_KEY = '8b20680c766bc5c37143e5d6b7aa7894';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst TREND_URL = `${BASE_URL}/trending/movie/week`;\nconst SEARCH_URL = `${BASE_URL}/search/movie`;\nconst TRAILER_URL = `${BASE_URL}/movie`;\nexport { API_KEY, BASE_URL, TREND_URL, SEARCH_URL, TRAILER_URL };\n","\nconst load = key => {\n  try {\n    let serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState)\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Remove state error: ', error.message);\n  }\n};\n\nexport { load, save, remove };\n","import photo from '../images/header/photo.jpg';\nimport { refs } from '../js/refs';\nimport { load, save } from './localStorage';\nimport { fetchTrailer } from './fetchAPI';\nimport { onClickTrailer } from './trailer';\nimport { invalidSearchTrailer } from './trailer';\n\nconst LOCAL_KEY_WATCHED = 'watched-movies';\nconst LOCAL_KEY_QUEUE = 'queue-movies';\n\nlet arrWatchedMovies = [];\nlet arrQueueMovies = [];\n\nif (!load(LOCAL_KEY_WATCHED)) {\n  save(LOCAL_KEY_WATCHED, arrWatchedMovies);\n}\n\nif (!load(LOCAL_KEY_QUEUE)) {\n  save(LOCAL_KEY_QUEUE, arrQueueMovies);\n}\n\nfunction renderCardOfMovie({\n  title,\n  vote_average,\n  vote_count,\n  popularity,\n  poster_path,\n  original_title,\n  genre_ids,\n  overview,\n  id,\n}) {\n  const arrGenres = genre_ids.map(genre => {\n    return localStorage.getItem(genre);\n  });\n\n  const markupForModalMovie = `  <img\n          class='modal-movie__img'\n\n          ${\n            poster_path\n              ? `\n    srcset=\"\n    https://image.tmdb.org/t/p/w300/${poster_path}      300w,\n    https://image.tmdb.org/t/p/w500/${poster_path}      500w,\n    https://image.tmdb.org/t/p/w780/${poster_path}      780w,\n    https://image.tmdb.org/t/p/w1280/${poster_path}    1280w,\n    https://image.tmdb.org/t/p/original/${poster_path} 2000w\n  \"\n  src=\"https://image.tmdb.org/t/p/w300/${poster_path}\"\n  sizes=\"(min-width:1280px) 375px, (min-width:768px) 264px, 100vw\"\n\n  `\n              : `src=\"${photo}\"\n  `\n          }\n        />\n        <button type=\"button\" class=\"btn__open-trailer js-open-trailer\"></button>`;\n\n  const markupForModalContent = `\n        <h2 class='modal__title'>${title}</h2>\n          <table class='modal-info'>\n            <tr>${\n              vote_count\n                ? `<td class='modal-info__title'>Vote / Votes</td>`\n                : ''\n            }\n              ${\n                vote_count\n                  ? `<td class='modal-info__value'>\n                <span class='modal-info__rate'>${vote_average.toFixed(1)}</span>\n                /\n                <span class='modal-info__rate'>${vote_count}</span>\n              </td>`\n                  : ''\n              }\n            \n            </tr>\n            <tr>\n              ${\n                popularity\n                  ? `<td class='modal-info__title'>Popularity</td>`\n                  : ''\n              }\n              ${\n                popularity\n                  ? `<td class='modal-info__value'>${popularity.toFixed(\n                      1\n                    )}</td>`\n                  : ''\n              }\n            </tr>\n            <tr>\n              ${\n                original_title\n                  ? `<td class='modal-info__title'>Original Title</td>`\n                  : ''\n              }\n              ${\n                original_title\n                  ? `<td class='modal-info__value'>${original_title}</td>`\n                  : ''\n              }\n            </tr>\n            <tr>\n              ${\n                arrGenres.join(', ')\n                  ? `<td class='modal-info__title'>Genre</td>`\n                  : ''\n              }\n              ${\n                arrGenres.join(', ')\n                  ? `<td class='modal-movie-info__value'>${arrGenres.join(\n                      ', '\n                    )}</td>`\n                  : ''\n              }\n            </tr>\n          </table>\n          <div class='modal-about'>\n            ${overview ? `<h3 class='modal-about__title'>About</h3>` : ''}\n            ${overview ? `<p class='modal-about__desc'>${overview}</p>` : ''}\n          </div>`;\n\n  refs.modal.setAttribute('data-id', id);\n  refs.addWatchedBtn.setAttribute('data-id', id);\n  refs.addQueueBtn.setAttribute('data-id', id);\n  refs.modalMovie.insertAdjacentHTML('afterbegin', markupForModalMovie);\n  refs.modalText.insertAdjacentHTML('afterbegin', markupForModalContent);\n}\n// ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\nexport function onClickItem(e) {\n  const itemId = Number(e.currentTarget.id);\n  arrWatchedMovies = load(LOCAL_KEY_WATCHED);\n  arrQueueMovies = load(LOCAL_KEY_QUEUE);\n  console.log(itemId);\n  const parsedDataSearch = JSON.parse(localStorage.getItem('search-storage'));\n  const resultsSearch = parsedDataSearch.results;\n  // const cardSearch = resultsSearch.find(object => {\n  //   if (object.id === itemId) {\n  //     return object;\n  //   }\n  // });\n  const saveDataAll = arrWatchedMovies.concat(arrQueueMovies).concat(resultsSearch)\n  const cardSearchOnLibrary = saveDataAll.find(object => {\n    if (object.id === itemId) {\n      return object;\n    }\n  });\n  // console.log(cardSearch);\n  renderCardOfMovie(cardSearchOnLibrary);\n\n\n  refs.backdrop.classList.remove('is-hidden');\n  refs.closeBtn.addEventListener('click', onCloseModal);\n  refs.backdrop.addEventListener('click', onCloseModal);\n  window.addEventListener('keydown', onCloseModayByEsc);\n  refs.addWatchedBtn.addEventListener('click', onClickWatched);\n  refs.addQueueBtn.addEventListener('click', onClickQueue);\n\n  const isFilmInWatched = arrWatchedMovies.some(film => film.id === itemId);\n\n  if (isFilmInWatched) {\n    refs.addWatchedBtn.textContent = 'remove from watched';\n    refs.addWatchedBtn.classList.add('active-watched');\n  } else {\n    refs.addWatchedBtn.textContent = 'add to watched';\n    refs.addWatchedBtn.classList.remove('active-watched');\n  }\n\n  const isFilmInQueue = arrQueueMovies.some(film => film.id === itemId);\n  if (isFilmInQueue) {\n    refs.addQueueBtn.textContent = 'remove from queue';\n    refs.addQueueBtn.classList.add('active-queue');\n  } else {\n    refs.addQueueBtn.textContent = 'add to queue';\n    refs.addQueueBtn.classList.remove('active-queue');\n  }\n\n  // document.body.style.overflowY = 'scroll';\n  // refs.body.classList.add('body-lock');\n\n  // ************* show trailer on YouTube**start*****\n  const trailerButton = document.querySelector('.js-open-trailer');\n  trailerButton.addEventListener(`click`, onClickTrailer);\n  async function onClickTrailer(e) {\n    try {\n      const data = await fetchTrailer(itemId);\n      console.log(data.results.length);\n      if (data.results.length > 0) {\n        window.open(\n          `https://www.youtube.com/watch?v=${data.results[0].key}`,\n          '_blank'\n        );\n      } else {\n        function invalidSearchTrailer() {\n          const modalMovie = document.querySelector('.modal-movie');\n          modalMovie.insertAdjacentHTML(\n            'afterbegin',\n            '<p class=\"trailer-search form__uncorrect-search is-hidden\"></p>'\n          );\n          const notification = document.querySelector(\n            '.form__uncorrect-search'\n          );\n          notification.textContent =\n            'Sorry, but there is no trailer for this movie';\n          setTimeout(() => {\n            notification.classList.toggle('is-hidden');\n          }, 1000);\n          const removeNotification = setTimeout(() => {\n            modalMovie.firstElementChild.remove();\n          }, 2000);\n        }\n        invalidSearchTrailer();\n      }\n    } catch (error) {\n      error.message;\n    }\n  }\n  // ************* show trailer on YouTube**END*****\n}\n\nfunction onCloseModal(e) {\n  if (\n    e.target.classList.value === 'btn-modal-close' ||\n    e.target === e.currentTarget\n  ) {\n    refs.backdrop.classList.add('is-hidden');\n    document.body.style.overflow = '';\n    refs.closeBtn.removeEventListener('click', onCloseModal);\n    refs.backdrop.removeEventListener('click', onCloseModal);\n    refs.addWatchedBtn.removeEventListener('click', onClickWatched);\n    refs.addQueueBtn.removeEventListener('click', onClickQueue);\n    window.removeEventListener('keydown', onCloseModayByEsc);\n\n    refs.modalMovie.innerHTML = '';\n    refs.modalText.innerHTML = '';\n  }\n}\n\nfunction onCloseModayByEsc(e) {\n  console.log(e.code);\n  if (e.code === 'Escape') {\n    refs.backdrop.classList.add('is-hidden');\n    document.body.style.overflow = '';\n    refs.closeBtn.removeEventListener('click', onCloseModal);\n    refs.backdrop.removeEventListener('click', onCloseModal);\n    window.removeEventListener('keydown', onCloseModayByEsc);\n    refs.addWatchedBtn.removeEventListener('click', onClickWatched);\n    refs.addQueueBtn.removeEventListener('click', onClickQueue);\n\n    refs.modalMovie.innerHTML = '';\n    refs.modalText.innerHTML = '';\n  }\n}\n\nfunction onClickWatched(e) {\n  const removeBtn = document.querySelector('.active-watched');\n  e.target.classList.toggle('active-watched');\n  const currentMoviesId = Number(refs.modal.dataset.id);\n\n  const parsedDataSearch = JSON.parse(localStorage.getItem('search-storage'));\n  const resultsSearch = parsedDataSearch.results;\n  arrWatchedMovies = load(LOCAL_KEY_WATCHED);\n\n  if (removeBtn) {\n    const newMoviesArr = arrWatchedMovies.filter(\n      film => film.id != currentMoviesId\n    );\n    save(LOCAL_KEY_WATCHED, newMoviesArr);\n    e.target.textContent = 'add to watched';\n  }\n  if (!removeBtn) {\n    resultsSearch.find(object => {\n      if (object.id === currentMoviesId) {\n        arrWatchedMovies.push(object);\n        console.log(arrWatchedMovies);\n        save(LOCAL_KEY_WATCHED, arrWatchedMovies);\n        console.log(object);\n      }\n    });\n    e.target.textContent = 'remove from watched';\n  }\n}\n\nfunction onClickQueue(e) {\n  const removeBtn = document.querySelector('.active-queue');\n  e.target.classList.toggle('active-queue');\n\n  const currentMoviesId = Number(refs.modal.dataset.id);\n\n  const parsedDataSearch = JSON.parse(localStorage.getItem('search-storage'));\n  const resultsSearch = parsedDataSearch.results;\n  arrQueueMovies = load(LOCAL_KEY_QUEUE);\n\n  if (removeBtn) {\n    const newMoviesArr = arrQueueMovies.filter(\n      film => film.id != currentMoviesId\n    );\n    save(LOCAL_KEY_QUEUE, newMoviesArr);\n    e.target.textContent = 'add to queue';\n  }\n  if (!removeBtn) {\n    resultsSearch.find(object => {\n      if (object.id === currentMoviesId) {\n        arrQueueMovies.push(object);\n        console.log(arrQueueMovies);\n        save(LOCAL_KEY_QUEUE, arrQueueMovies);\n        console.log(object);\n      }\n    });\n    e.target.textContent = 'remove from queue';\n  }\n}\n\nfunction waitingLi() {\n  setTimeout(() => {\n    refs.cardsList.childNodes.forEach(card => {\n      card.addEventListener('click', onClickItem);\n    });\n  }, 200);\n}\n\nexport { arrWatchedMovies, arrQueueMovies, waitingLi };\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8iIgb\")).toString();","export const refs = {\n  body: document.querySelector('body'),\n  form: document.querySelector('.header-form'),\n  watchedBtn: document.querySelector('.watched-list-btn'),\n  paginationEl: document.getElementById('tui-pagination-container'),\n  moviesGallery: document.querySelector('.cards__list--home'),\n\n  //=====formFilm будет удален - надо переименовать на -- form в рабочем файле JS\n  formFilm: document.querySelector('.header-form'),\n\n  //////    Modal movie   ////////\n  cardsList: document.querySelector('.cards__list'),\n  backdrop: document.querySelector('.backdrop'),\n  modal: document.querySelector('.modal'),\n  modalMovie: document.querySelector('.modal-movie'),\n  modalContent: document.querySelector('.modal__content'),\n  closeBtn: document.querySelector('.btn-modal__icon'),\n  addWatchedBtn: document.querySelector('.btn-modal__watched'),\n  addQueueBtn: document.querySelector('.btn-modal__queue'),\n  modalText: document.querySelector('.modal__text'),\n};\n","import {\n  API_KEY,\n  BASE_URL,\n  TREND_URL,\n  SEARCH_URL,\n  TRAILER_URL,\n} from './api-vars.js';\n\nimport { refs } from './refs';\nimport { fetchTrailer } from './fetchAPI.js';\n\n// export async function getTrailer(id) {\n//   try {\n//     const data = await fetchTrailer(id);\n//     // console.log(data);\n//     // console.log(data.results.length);\n//     if (data.results.length > 0) {\n//       window.open(\n//         `https://www.youtube.com/watch?v=${data.results[0].key}`,\n//         '_blank'\n//       );\n//     } else {\n//       console.log('Sorry, but there is no trailer for this movie');\n//     }\n//   } catch (err) {\n//     console.error(err.message);\n//   }\n// }\n// // getTrailer(4564);\n\nexport async function onClickTrailer(e) {\n  try {\n    const data = await fetchTrailer(itemId);\n    console.log(data.results.length);\n    if (data.results.length > 0) {\n      window.open(\n        `https://www.youtube.com/watch?v=${data.results[0].key}`,\n        '_blank'\n      );\n    } else {\n      function invalidSearchTrailer() {\n        const modalMovie = document.querySelector('.modal-movie');\n        //console.log(modalMovie);\n        modalMovie.insertAdjacentHTML(\n          'afterbegin',\n          '<p class=\"trailer-search form__uncorrect-search is-hidden\"></p>'\n        );\n        const notification = document.querySelector('.form__uncorrect-search');\n        notification.textContent =\n          'Sorry, but there is no trailer for this movie';\n        setTimeout(() => {\n          notification.classList.toggle('is-hidden');\n        }, 1000);\n        const removeNotification = setTimeout(() => {\n          modalMovie.firstElementChild.remove();\n        }, 2000);\n      }\n      invalidSearchTrailer();\n    }\n  } catch (error) {\n    error.message;\n  }\n}\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"3u2jX\\\":\\\"index.3985ac47.js\\\",\\\"8iIgb\\\":\\\"photo.e4714d22.jpg\\\"}\"));"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$6RiD3","parcelRequire","async","$90c8fc7a5ef2db29$export$a2840eca364d9ff2","page","options","headers","resp","fetch","TREND_URL","API_KEY","respData","json","$31u3U","save","error","console","message","$90c8fc7a5ef2db29$export$16b5f39e5defaec7","filmId","response","TRAILER_URL","log","$4fe6249a29778eae$export$a9861bd62f48e142","$4fe6249a29778eae$export$ca6dda5263526f75","$4fe6249a29778eae$export$3e13cfa1fb75582c","$4fe6249a29778eae$export$48314f791897fe3f","$4fe6249a29778eae$export$64e192140549ff6f","$2338c8cd734f85a6$export$11e63f7b0f3d9900","key","serializedState","localStorage","getItem","undefined","JSON","parse","$2338c8cd734f85a6$export$a1544dad697b423d","value","stringify","setItem","$itj1P","$8493215c505d4f4a$var$LOCAL_KEY_WATCHED","$8493215c505d4f4a$var$LOCAL_KEY_QUEUE","$8493215c505d4f4a$export$50104bf3ad9bb4f5","$8493215c505d4f4a$export$21023a06dd754859","$8493215c505d4f4a$export$1b658b97576979b2","e","itemId","Number","currentTarget","load","resultsSearch","results","title","vote_average","vote_count","popularity","poster_path","original_title","genre_ids","overview","arrGenres","map","genre","markupForModalMovie","$parcel$interopDefault","markupForModalContent","toFixed","join","$krGWQ","refs","modal","setAttribute","addWatchedBtn","addQueueBtn","modalMovie","insertAdjacentHTML","modalText","$8493215c505d4f4a$var$renderCardOfMovie","concat","find","object","backdrop","classList","remove","closeBtn","addEventListener","$8493215c505d4f4a$var$onCloseModal","window","$8493215c505d4f4a$var$onCloseModayByEsc","$8493215c505d4f4a$var$onClickWatched","$8493215c505d4f4a$var$onClickQueue","some","film","textContent","add","document","querySelector","data","$cqGDw","fetchTrailer","open","notification","setTimeout","toggle","firstElementChild","invalidSearchTrailer1","target","body","style","overflow","removeEventListener","innerHTML","code","removeBtn","currentMoviesId","dataset","newMoviesArr","filter","push","$8493215c505d4f4a$export$e5eb147591d20571","cardsList","childNodes","forEach","card","module","exports","URL","resolve","import","meta","url","toString","$ee27a4d7c64fc8c4$export$21666b427502ea6d","form","watchedBtn","paginationEl","getElementById","moviesGallery","formFilm","modalContent","register"],"version":3,"file":"index.3985ac47.js.map"}