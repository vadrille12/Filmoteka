var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o),o("cqGDw"),o("krGWQ"),o("bnGUG"),o("2nhTy");var r=o("6RiD3"),s=o("TEsX4"),a=(s=o("TEsX4"),o("2nhTy")),i=o("krGWQ"),c=o("31u3U"),l=o("h0oKa");document.querySelector(".header-logo__link").addEventListener("click",(function(){d=1,(0,s.showTrendingMovies)(d)})),i.refs.form.addEventListener("submit",(async function(e){if(e.preventDefault(),d=1,u=e.currentTarget.elements.searchQuery.value.trim(),console.log(u),i.refs.paginationEl.style.display="none",""===u)return h("Search for movies is empty! Enter movie name, please",2e3),void(i.refs.paginationEl.style.display="none");await f(u,d).then((e=>{console.log(e);const t=e.total_results;console.log(t),t||h("Search result not successful. Enter the correct movie name and try again",2e3),t>=1&&((0,s.renderTrendingMovies)(e.results),d+=1,(0,a.makeTuiPagination)(t,e.total_pages).on("afterMove",(({page:e})=>{f(u,e).then((e=>{(0,s.renderTrendingMovies)(e.results),(0,c.save)("search-storage",e),(0,l.default)()}))})))})).catch((e=>console.log(e))).finally((()=>{i.refs.form.reset()}))}));let d=1,u="";async function f(e,t){try{const n=await fetch(`${r.SEARCH_URL}?api_key=${r.API_KEY}&page=${t}&include_adult=false&query=${e}`),o=await n.json();return(0,c.save)("search-storage",o),o}catch(e){console.error()}}function h(e,t){i.refs.form.insertAdjacentHTML("beforeend",'<p class="form__uncorrect-search is-hidden"></p>');const n=document.querySelector(".form__uncorrect-search");n.textContent=`${e}`,setTimeout((()=>{n.classList.toggle("is-hidden")}),t),(0,s.showTrendingMovies)(d);setTimeout((()=>{i.refs.form.lastElementChild.remove()}),2e3)}o("TEsX4"),o("6RiD3");r=o("6RiD3");(async function(){try{const e=await fetch(`${r.BASE_URL}/genre/movie/list?api_key=${r.API_KEY}&language=en-US`);return await e.json()}catch(e){console.log(e.message)}})().then((e=>{e.genres.map((e=>{localStorage.setItem(JSON.stringify(e.id),e.name)}))})),o("31u3U");const m=document.querySelector("#btn--to_top");document.addEventListener("DOMContentLoaded",(function(){window.addEventListener("scroll",(function(){this.scrollY>100?m.classList.add("show"):m.classList.remove("show")}))})),o("krGWQ"),window.addEventListener("load",(function(){document.querySelector(".toggler");const e=document.querySelector(".theme-btn"),t=document.documentElement,n=localStorage.getItem("user-theme");let o;window.matchMedia&&(o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{!n&&r()})),e&&e.addEventListener("click",(function(e){r(!0)}));function r(e=!1){let n,o=t.classList.contains("light")?"light":"dark";"light"===o?n="dark":"dark"===o&&(n="light"),t.classList.remove(o),t.classList.add(n),e&&localStorage.setItem("user-theme",n)}n?t.classList.add(n):t.classList.add(o)})),o("h0oKa"),o("37v9V"),o("gjiCh");
//# sourceMappingURL=index.c63d1637.js.map
