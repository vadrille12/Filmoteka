function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequired7c6=s),s("kyEFX").register(JSON.parse('{"5ZPII":"index.76eb1142.js","8iIgb":"photo.e4714d22.jpg","7mVsD":"index.1e0c2b66.css","4JSjo":"library.84f2772a.js","3u2jX":"index.140a50db.js"}')),s("cqGDw"),s("krGWQ"),s("bnGUG"),s("2nhTy");var a,i=s("6RiD3"),r=s("cqGDw"),c=s("krGWQ"),l=s("2nhTy");a=new URL(s("kyEFX").resolve("8iIgb"),import.meta.url).toString();var d=s("31u3U"),u=s("h0oKa"),m=s("bnGUG");document.querySelector(".cards__list");async function h(e=1){try{const t=await(0,r.fetchTrendingMovies)(e);_(t.results),(0,d.save)("search-storage",t),(0,l.makeTuiPagination)(t.total_results,t.total_pages).on("afterMove",(({page:e})=>{(0,r.fetchTrendingMovies)(e).then((e=>{_(e.results),(0,d.save)("search-storage",e),(0,u.default)()}))}))}catch(e){console.error(e.message)}}function g(e){return e.map((e=>localStorage.getItem(e))).join(", ")}function _(t){let n="",o="";(0,m.waitingLi)();const s=t.map((({poster_path:t,title:s,genre_ids:i,release_date:r="",vote_average:c="",id:l})=>(i.length>3&&(i.splice(3,i.length-3),n=g(i),n+=", other"),n=g(i),n.length>24&&(i.pop(),n=g(i),n+=", other"),0===i.length&&(n="genre is unknown"),o=r.slice(0,4),""===o&&(o="release date unknown"),t?`<li id="${l}" class="movie__card">\n        <img\n          src="https://image.tmdb.org/t/p/w500/${t}"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">${s}</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">${n}</h3>\n          <h3 class="movie__year">${o}</h3>\n          <div class="movie__average">${c.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`:`<li  id="${l}" class="movie__card">\n        <img width="100%"\n          src="${e(a)}"\n          class="movie__cover"\n        />\n        <div class="movie__info">\n        <h2 class="movie__title">${s}</h2>\n        <div class="movie__item">\n          <h3 class="movie__category">${n}</h3>\n          <h3 class="movie__year">${o}</h3>\n          <div class="movie__average">${c.toFixed(1)}</div>\n        </div>\n      </div>\n      </li>`))).join("");c.refs.moviesGallery.innerHTML=s}h().then(console.log);l=s("2nhTy"),c=s("krGWQ"),d=s("31u3U"),u=s("h0oKa");document.querySelector(".header-logo__link").addEventListener("click",(function(){v=1,h(v)})),c.refs.form.addEventListener("submit",(async function(e){if(e.preventDefault(),v=1,f=e.currentTarget.elements.searchQuery.value.trim(),console.log(f),c.refs.paginationEl.style.display="none",""===f)return y("Search for movies is empty! Enter movie name, please",2e3),void(c.refs.paginationEl.style.display="none");await p(f,v).then((e=>{console.log(e);const t=e.total_results;console.log(t),t||y("Search result not successful. Enter the correct movie name and try again",2e3),t>=1&&(_(e.results),v+=1,(0,l.makeTuiPagination)(t,e.total_pages).on("afterMove",(({page:e})=>{p(f,e).then((e=>{_(e.results),(0,d.save)("search-storage",e),(0,u.default)()}))})))})).catch((e=>console.log(e))).finally((()=>{c.refs.form.reset()}))}));let v=1,f="";async function p(e,t){try{const n=await fetch(`${i.SEARCH_URL}?api_key=${i.API_KEY}&page=${t}&include_adult=false&query=${e}`),o=await n.json();return(0,d.save)("search-storage",o),o}catch(e){console.error()}}function y(e,t){c.refs.form.insertAdjacentHTML("beforeend",'<p class="form__uncorrect-search is-hidden"></p>');const n=document.querySelector(".form__uncorrect-search");n.textContent=`${e}`,setTimeout((()=>{n.classList.toggle("is-hidden")}),t),h(v);setTimeout((()=>{c.refs.form.lastElementChild.remove()}),2e3)}s("6RiD3");i=s("6RiD3");(async function(){try{const e=await fetch(`${i.BASE_URL}/genre/movie/list?api_key=${i.API_KEY}&language=en-US`);return await e.json()}catch(e){console.log(e.message)}})().then((e=>{e.genres.map((e=>{localStorage.setItem(JSON.stringify(e.id),e.name)}))})),s("31u3U");const w=document.querySelector("#btn--to_top");document.addEventListener("DOMContentLoaded",(function(){window.addEventListener("scroll",(function(){this.scrollY>100?w.classList.add("show"):w.classList.remove("show")}))})),s("krGWQ"),window.addEventListener("load",(function(){document.querySelector(".toggler");const e=document.querySelector(".theme-btn"),t=document.documentElement,n=localStorage.getItem("user-theme");let o;window.matchMedia&&(o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{!n&&s()})),e&&e.addEventListener("click",(function(e){s(!0)}));function s(e=!1){let n,o=t.classList.contains("light")?"light":"dark";"light"===o?n="dark":"dark"===o&&(n="light"),t.classList.remove(o),t.classList.add(n),e&&localStorage.setItem("user-theme",n)}n?t.classList.add(n):t.classList.add(o)})),s("h0oKa"),s("37v9V"),s("gjiCh");
//# sourceMappingURL=index.76eb1142.js.map
